---
title: "Setting up and Getting Started with meetupr"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Setting up and Getting Started with meetupr}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r}
#| include: false
#| label: setup

knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  eval = TRUE
)

vcr::setup_knitr(prefix = "meetupr-")
meetupr:::mock_if_no_auth()
Sys.setenv(MEETUPR_DEBUG = "")
```

```{r}
#| label: load
library(meetupr)
```

## Quick Setup Check

Start by running `meetup_sitrep()` to check your authentication status:

```{r}
#| label: sitrep
#| cassette: true

meetup_sitrep()
```

This function will show you:  
- Which authentication method is active (JWT or OAuth)  
- Whether your credentials are properly configured  
- API connectivity status  
- Setup instructions if authentication is missing  

## Authentication Methods

meetupr supports two authentication methods:

### JWT Authentication (Recommended for Automation)

Best for:  
- CI/CD pipelines  
- Server applications  
- Automated scripts  
- Any non-interactive workflow  

**Required environment variables:**
- `MEETUP_CLIENT_ID` - OAuth client ID  
- `MEETUP_MEMBER_ID` - Your Meetup member ID  
- `MEETUP_RSA_PATH` - RSA private key for signing  

See [JWT authentication vignette](jwt-auth.html) for complete setup instructions.

### OAuth Authentication (Interactive)

Best for:  
- Interactive development  
- Data exploration  
- One-off analyses  

**Required environment variables:**  
- `MEETUP_CLIENT_ID` - OAuth client ID    
- `MEETUP_CLIENT_SECRET` - OAuth client secret  

## Setting Environment Variables

### Using .Renviron (Recommended)

```{r}
#| label: edit-renviron
#| eval: FALSE
usethis::edit_r_environ()
```

Add your credentials:

```bash
MEETUP_CLIENT_ID=your_client_id_here
MEETUP_MEMBER_ID=123456789
MEETUP_RSA_PATH="/path/to/your/private_key"
```

### Security Critical: Protecting .Renviron

**Never commit `.Renviron` to version control:**

```{r}
#| label: git-ignore
#| eval: FALSE
usethis::use_git_ignore(".Renviron")
```

The `.Renviron` file contains sensitive credentials. If accidentally committed:

1. Immediately rotate all credentials  
2. Remove from git history: `git filter-branch` or BFG Repo-Cleaner  
3. Update repository secrets in CI/CD systems  

### Verification

After setting environment variables, restart R and check:

```{r}
#| label: verify-sitrep
#| cassette: true
meetup_sitrep()
```

## Basic Usage Examples

### Get Group Information

```{r}
#| label: group-info
#| cassette: true
group_info <- get_group("rladies-lagos")
str(group_info)
```

### List Upcoming Events

```{r}
#| label: upcoming-events
#| cassette: true
events <- get_events("rladies-lagos")
head(events)
```

### Search for Groups

```{r}
#| label: search-groups
#| cassette: true
r_groups <- find_groups("R programming")
head(r_groups)
```

## Debug Mode

Sometimes issues arise due to misconfiguration.
Enabling debugging mode provides more information on what is sent to the API, i.e. the full graphql query.
Enable debugging mode by setting system variable "MEETUPR_DEBUG" to 1 (0 or missing means no debugging):

```{r}
#| label: debug
#| cassette: true

Sys.setenv(MEETUPR_DEBUG = "1")
meetup_sitrep()
r_groups <- find_groups("R programming")
```

## Common Issues

### Authentication Errors

```r
Error: Authentication required
```

**Solution**: Run `meetup_sitrep()` to diagnose authentication issues.

### Invalid RSA Key

```r
Error: RSA private key not found
```

**Solution**: Verify your RSA key format includes header/footer lines and is properly formatted.

### Rate Limiting

```r
Error: Rate limit exceeded
```

**Solution**: Implement delays between requests or use caching strategies.

## Next Steps

- **For R-Ladies chapter management**: See [R-Ladies vignette](rladies.html)  
- **For custom GraphQL queries**: See [GraphQL vignette](graphql.html)`
- **For CI/CD workflows**: See [JWT Authentication vignette](jwt-auth.html)


