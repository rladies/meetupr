<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>R6 and Reference class performance tests</title>


<style type="text/css">code{white-space: pre;}</style>
<link href="data:text/css;charset=utf-8,pre%20%2Eoperator%2C%0Apre%20%2Eparen%20%7B%0Acolor%3A%20rgb%28104%2C%20118%2C%20135%29%0A%7D%0Apre%20%2Eliteral%20%7B%0Acolor%3A%20%23990073%0A%7D%0Apre%20%2Enumber%20%7B%0Acolor%3A%20%23099%3B%0A%7D%0Apre%20%2Ecomment%20%7B%0Acolor%3A%20%23998%3B%0Afont%2Dstyle%3A%20italic%0A%7D%0Apre%20%2Ekeyword%20%7B%0Acolor%3A%20%23900%3B%0Afont%2Dweight%3A%20bold%0A%7D%0Apre%20%2Eidentifier%20%7B%0Acolor%3A%20rgb%280%2C%200%2C%200%29%3B%0A%7D%0Apre%20%2Estring%20%7B%0Acolor%3A%20%23d14%3B%0A%7D%0A" rel="stylesheet" type="text/css" />
<script src="data:application/x-javascript;base64,dmFyIGhsanM9bmV3IGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbShwKXtyZXR1cm4gcC5yZXBsYWNlKC8mL2dtLCImYW1wOyIpLnJlcGxhY2UoLzwvZ20sIiZsdDsiKX1mdW5jdGlvbiBmKHIscSxwKXtyZXR1cm4gUmVnRXhwKHEsIm0iKyhyLmNJPyJpIjoiIikrKHA/ImciOiIiKSl9ZnVuY3Rpb24gYihyKXtmb3IodmFyIHA9MDtwPHIuY2hpbGROb2Rlcy5sZW5ndGg7cCsrKXt2YXIgcT1yLmNoaWxkTm9kZXNbcF07aWYocS5ub2RlTmFtZT09IkNPREUiKXtyZXR1cm4gcX1pZighKHEubm9kZVR5cGU9PTMmJnEubm9kZVZhbHVlLm1hdGNoKC9ccysvKSkpe2JyZWFrfX19ZnVuY3Rpb24gaCh0LHMpe3ZhciBwPSIiO2Zvcih2YXIgcj0wO3I8dC5jaGlsZE5vZGVzLmxlbmd0aDtyKyspe2lmKHQuY2hpbGROb2Rlc1tyXS5ub2RlVHlwZT09Myl7dmFyIHE9dC5jaGlsZE5vZGVzW3JdLm5vZGVWYWx1ZTtpZihzKXtxPXEucmVwbGFjZSgvXG4vZywiIil9cCs9cX1lbHNle2lmKHQuY2hpbGROb2Rlc1tyXS5ub2RlTmFtZT09IkJSIil7cCs9IlxuIn1lbHNle3ArPWgodC5jaGlsZE5vZGVzW3JdKX19fWlmKC9NU0lFIFs2NzhdLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXtwPXAucmVwbGFjZSgvXHIvZywiXG4iKX1yZXR1cm4gcH1mdW5jdGlvbiBhKHMpe3ZhciByPXMuY2xhc3NOYW1lLnNwbGl0KC9ccysvKTtyPXIuY29uY2F0KHMucGFyZW50Tm9kZS5jbGFzc05hbWUuc3BsaXQoL1xzKy8pKTtmb3IodmFyIHE9MDtxPHIubGVuZ3RoO3ErKyl7dmFyIHA9cltxXS5yZXBsYWNlKC9ebGFuZ3VhZ2UtLywiIik7aWYoZVtwXSl7cmV0dXJuIHB9fX1mdW5jdGlvbiBjKHEpe3ZhciBwPVtdOyhmdW5jdGlvbihzLHQpe2Zvcih2YXIgcj0wO3I8cy5jaGlsZE5vZGVzLmxlbmd0aDtyKyspe2lmKHMuY2hpbGROb2Rlc1tyXS5ub2RlVHlwZT09Myl7dCs9cy5jaGlsZE5vZGVzW3JdLm5vZGVWYWx1ZS5sZW5ndGh9ZWxzZXtpZihzLmNoaWxkTm9kZXNbcl0ubm9kZU5hbWU9PSJCUiIpe3QrPTF9ZWxzZXtpZihzLmNoaWxkTm9kZXNbcl0ubm9kZVR5cGU9PTEpe3AucHVzaCh7ZXZlbnQ6InN0YXJ0IixvZmZzZXQ6dCxub2RlOnMuY2hpbGROb2Rlc1tyXX0pO3Q9YXJndW1lbnRzLmNhbGxlZShzLmNoaWxkTm9kZXNbcl0sdCk7cC5wdXNoKHtldmVudDoic3RvcCIsb2Zmc2V0OnQsbm9kZTpzLmNoaWxkTm9kZXNbcl19KX19fX1yZXR1cm4gdH0pKHEsMCk7cmV0dXJuIHB9ZnVuY3Rpb24gayh5LHcseCl7dmFyIHE9MDt2YXIgej0iIjt2YXIgcz1bXTtmdW5jdGlvbiB1KCl7aWYoeS5sZW5ndGgmJncubGVuZ3RoKXtpZih5WzBdLm9mZnNldCE9d1swXS5vZmZzZXQpe3JldHVybih5WzBdLm9mZnNldDx3WzBdLm9mZnNldCk/eTp3fWVsc2V7cmV0dXJuIHdbMF0uZXZlbnQ9PSJzdGFydCI/eTp3fX1lbHNle3JldHVybiB5Lmxlbmd0aD95Ond9fWZ1bmN0aW9uIHQoRCl7dmFyIEE9IjwiK0Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtmb3IodmFyIEI9MDtCPEQuYXR0cmlidXRlcy5sZW5ndGg7QisrKXt2YXIgQz1ELmF0dHJpYnV0ZXNbQl07QSs9IiAiK0Mubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihDLnZhbHVlIT09dW5kZWZpbmVkJiZDLnZhbHVlIT09ZmFsc2UmJkMudmFsdWUhPT1udWxsKXtBKz0nPSInK20oQy52YWx1ZSkrJyInfX1yZXR1cm4gQSsiPiJ9d2hpbGUoeS5sZW5ndGh8fHcubGVuZ3RoKXt2YXIgdj11KCkuc3BsaWNlKDAsMSlbMF07eis9bSh4LnN1YnN0cihxLHYub2Zmc2V0LXEpKTtxPXYub2Zmc2V0O2lmKHYuZXZlbnQ9PSJzdGFydCIpe3orPXQodi5ub2RlKTtzLnB1c2godi5ub2RlKX1lbHNle2lmKHYuZXZlbnQ9PSJzdG9wIil7dmFyIHAscj1zLmxlbmd0aDtkb3tyLS07cD1zW3JdO3orPSgiPC8iK3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKSsiPiIpfXdoaWxlKHAhPXYubm9kZSk7cy5zcGxpY2UociwxKTt3aGlsZShyPHMubGVuZ3RoKXt6Kz10KHNbcl0pO3IrK319fX1yZXR1cm4geittKHguc3Vic3RyKHEpKX1mdW5jdGlvbiBqKCl7ZnVuY3Rpb24gcSh4LHksdil7aWYoeC5jb21waWxlZCl7cmV0dXJufXZhciB1O3ZhciBzPVtdO2lmKHguayl7eC5sUj1mKHkseC5sfHxobGpzLklSLHRydWUpO2Zvcih2YXIgdyBpbiB4Lmspe2lmKCF4LmsuaGFzT3duUHJvcGVydHkodykpe2NvbnRpbnVlfWlmKHgua1t3XSBpbnN0YW5jZW9mIE9iamVjdCl7dT14Lmtbd119ZWxzZXt1PXguazt3PSJrZXl3b3JkIn1mb3IodmFyIHIgaW4gdSl7aWYoIXUuaGFzT3duUHJvcGVydHkocikpe2NvbnRpbnVlfXgua1tyXT1bdyx1W3JdXTtzLnB1c2gocil9fX1pZighdil7aWYoeC5iV0spe3guYj0iXFxiKCIrcy5qb2luKCJ8IikrIilcXHMifXguYlI9Zih5LHguYj94LmI6IlxcQnxcXGIiKTtpZigheC5lJiYheC5lVyl7eC5lPSJcXEJ8XFxiIn1pZih4LmUpe3guZVI9Zih5LHguZSl9fWlmKHguaSl7eC5pUj1mKHkseC5pKX1pZih4LnI9PT11bmRlZmluZWQpe3gucj0xfWlmKCF4LmMpe3guYz1bXX14LmNvbXBpbGVkPXRydWU7Zm9yKHZhciB0PTA7dDx4LmMubGVuZ3RoO3QrKyl7aWYoeC5jW3RdPT0ic2VsZiIpe3guY1t0XT14fXEoeC5jW3RdLHksZmFsc2UpfWlmKHguc3RhcnRzKXtxKHguc3RhcnRzLHksZmFsc2UpfX1mb3IodmFyIHAgaW4gZSl7aWYoIWUuaGFzT3duUHJvcGVydHkocCkpe2NvbnRpbnVlfXEoZVtwXS5kTSxlW3BdLHRydWUpfX1mdW5jdGlvbiBkKEIsQyl7aWYoIWouY2FsbGVkKXtqKCk7ai5jYWxsZWQ9dHJ1ZX1mdW5jdGlvbiBxKHIsTSl7Zm9yKHZhciBMPTA7TDxNLmMubGVuZ3RoO0wrKyl7aWYoKE0uY1tMXS5iUi5leGVjKHIpfHxbbnVsbF0pWzBdPT1yKXtyZXR1cm4gTS5jW0xdfX19ZnVuY3Rpb24gdihMLHIpe2lmKERbTF0uZSYmRFtMXS5lUi50ZXN0KHIpKXtyZXR1cm4gMX1pZihEW0xdLmVXKXt2YXIgTT12KEwtMSxyKTtyZXR1cm4gTT9NKzE6MH1yZXR1cm4gMH1mdW5jdGlvbiB3KHIsTCl7cmV0dXJuIEwuaSYmTC5pUi50ZXN0KHIpfWZ1bmN0aW9uIEsoTixPKXt2YXIgTT1bXTtmb3IodmFyIEw9MDtMPE4uYy5sZW5ndGg7TCsrKXtNLnB1c2goTi5jW0xdLmIpfXZhciByPUQubGVuZ3RoLTE7ZG97aWYoRFtyXS5lKXtNLnB1c2goRFtyXS5lKX1yLS19d2hpbGUoRFtyKzFdLmVXKTtpZihOLmkpe00ucHVzaChOLmkpfXJldHVybiBmKE8sTS5qb2luKCJ8IiksdHJ1ZSl9ZnVuY3Rpb24gcChNLEwpe3ZhciBOPURbRC5sZW5ndGgtMV07aWYoIU4udCl7Ti50PUsoTixFKX1OLnQubGFzdEluZGV4PUw7dmFyIHI9Ti50LmV4ZWMoTSk7cmV0dXJuIHI/W00uc3Vic3RyKEwsci5pbmRleC1MKSxyWzBdLGZhbHNlXTpbTS5zdWJzdHIoTCksIiIsdHJ1ZV19ZnVuY3Rpb24geihOLHIpe3ZhciBMPUUuY0k/clswXS50b0xvd2VyQ2FzZSgpOnJbMF07dmFyIE09Ti5rW0xdO2lmKE0mJk0gaW5zdGFuY2VvZiBBcnJheSl7cmV0dXJuIE19cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIEYoTCxQKXtMPW0oTCk7aWYoIVAuayl7cmV0dXJuIEx9dmFyIHI9IiI7dmFyIE89MDtQLmxSLmxhc3RJbmRleD0wO3ZhciBNPVAubFIuZXhlYyhMKTt3aGlsZShNKXtyKz1MLnN1YnN0cihPLE0uaW5kZXgtTyk7dmFyIE49eihQLE0pO2lmKE4pe3grPU5bMV07cis9JzxzcGFuIGNsYXNzPSInK05bMF0rJyI+JytNWzBdKyI8L3NwYW4+In1lbHNle3IrPU1bMF19Tz1QLmxSLmxhc3RJbmRleDtNPVAubFIuZXhlYyhMKX1yZXR1cm4gcitMLnN1YnN0cihPLEwubGVuZ3RoLU8pfWZ1bmN0aW9uIEooTCxNKXtpZihNLnNMJiZlW00uc0xdKXt2YXIgcj1kKE0uc0wsTCk7eCs9ci5rZXl3b3JkX2NvdW50O3JldHVybiByLnZhbHVlfWVsc2V7cmV0dXJuIEYoTCxNKX19ZnVuY3Rpb24gSShNLHIpe3ZhciBMPU0uY04/JzxzcGFuIGNsYXNzPSInK00uY04rJyI+JzoiIjtpZihNLnJCKXt5Kz1MO00uYnVmZmVyPSIifWVsc2V7aWYoTS5lQil7eSs9bShyKStMO00uYnVmZmVyPSIifWVsc2V7eSs9TDtNLmJ1ZmZlcj1yfX1ELnB1c2goTSk7QSs9TS5yfWZ1bmN0aW9uIEcoTixNLFEpe3ZhciBSPURbRC5sZW5ndGgtMV07aWYoUSl7eSs9SihSLmJ1ZmZlcitOLFIpO3JldHVybiBmYWxzZX12YXIgUD1xKE0sUik7aWYoUCl7eSs9SihSLmJ1ZmZlcitOLFIpO0koUCxNKTtyZXR1cm4gUC5yQn12YXIgTD12KEQubGVuZ3RoLTEsTSk7aWYoTCl7dmFyIE89Ui5jTj8iPC9zcGFuPiI6IiI7aWYoUi5yRSl7eSs9SihSLmJ1ZmZlcitOLFIpK099ZWxzZXtpZihSLmVFKXt5Kz1KKFIuYnVmZmVyK04sUikrTyttKE0pfWVsc2V7eSs9SihSLmJ1ZmZlcitOK00sUikrT319d2hpbGUoTD4xKXtPPURbRC5sZW5ndGgtMl0uY04/Ijwvc3Bhbj4iOiIiO3krPU87TC0tO0QubGVuZ3RoLS19dmFyIHI9RFtELmxlbmd0aC0xXTtELmxlbmd0aC0tO0RbRC5sZW5ndGgtMV0uYnVmZmVyPSIiO2lmKHIuc3RhcnRzKXtJKHIuc3RhcnRzLCIiKX1yZXR1cm4gUi5yRX1pZih3KE0sUikpe3Rocm93IklsbGVnYWwifX12YXIgRT1lW0JdO3ZhciBEPVtFLmRNXTt2YXIgQT0wO3ZhciB4PTA7dmFyIHk9IiI7dHJ5e3ZhciBzLHU9MDtFLmRNLmJ1ZmZlcj0iIjtkb3tzPXAoQyx1KTt2YXIgdD1HKHNbMF0sc1sxXSxzWzJdKTt1Kz1zWzBdLmxlbmd0aDtpZighdCl7dSs9c1sxXS5sZW5ndGh9fXdoaWxlKCFzWzJdKTtpZihELmxlbmd0aD4xKXt0aHJvdyJJbGxlZ2FsIn1yZXR1cm57cjpBLGtleXdvcmRfY291bnQ6eCx2YWx1ZTp5fX1jYXRjaChIKXtpZihIPT0iSWxsZWdhbCIpe3JldHVybntyOjAsa2V5d29yZF9jb3VudDowLHZhbHVlOm0oQyl9fWVsc2V7dGhyb3cgSH19fWZ1bmN0aW9uIGcodCl7dmFyIHA9e2tleXdvcmRfY291bnQ6MCxyOjAsdmFsdWU6bSh0KX07dmFyIHI9cDtmb3IodmFyIHEgaW4gZSl7aWYoIWUuaGFzT3duUHJvcGVydHkocSkpe2NvbnRpbnVlfXZhciBzPWQocSx0KTtzLmxhbmd1YWdlPXE7aWYocy5rZXl3b3JkX2NvdW50K3Mucj5yLmtleXdvcmRfY291bnQrci5yKXtyPXN9aWYocy5rZXl3b3JkX2NvdW50K3Mucj5wLmtleXdvcmRfY291bnQrcC5yKXtyPXA7cD1zfX1pZihyLmxhbmd1YWdlKXtwLnNlY29uZF9iZXN0PXJ9cmV0dXJuIHB9ZnVuY3Rpb24gaShyLHEscCl7aWYocSl7cj1yLnJlcGxhY2UoL14oKDxbXj5dKz58XHQpKykvZ20sZnVuY3Rpb24odCx3LHYsdSl7cmV0dXJuIHcucmVwbGFjZSgvXHQvZyxxKX0pfWlmKHApe3I9ci5yZXBsYWNlKC9cbi9nLCI8YnI+Iil9cmV0dXJuIHJ9ZnVuY3Rpb24gbih0LHcscil7dmFyIHg9aCh0LHIpO3ZhciB2PWEodCk7dmFyIHkscztpZih2KXt5PWQodix4KX1lbHNle3JldHVybn12YXIgcT1jKHQpO2lmKHEubGVuZ3RoKXtzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInByZSIpO3MuaW5uZXJIVE1MPXkudmFsdWU7eS52YWx1ZT1rKHEsYyhzKSx4KX15LnZhbHVlPWkoeS52YWx1ZSx3LHIpO3ZhciB1PXQuY2xhc3NOYW1lO2lmKCF1Lm1hdGNoKCIoXFxzfF4pKGxhbmd1YWdlLSk/Iit2KyIoXFxzfCQpIikpe3U9dT8odSsiICIrdik6dn1pZigvTVNJRSBbNjc4XS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmdC50YWdOYW1lPT0iQ09ERSImJnQucGFyZW50Tm9kZS50YWdOYW1lPT0iUFJFIil7cz10LnBhcmVudE5vZGU7dmFyIHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cC5pbm5lckhUTUw9IjxwcmU+PGNvZGU+Iit5LnZhbHVlKyI8L2NvZGU+PC9wcmU+Ijt0PXAuZmlyc3RDaGlsZC5maXJzdENoaWxkO3AuZmlyc3RDaGlsZC5jTj1zLmNOO3MucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQocC5maXJzdENoaWxkLHMpfWVsc2V7dC5pbm5lckhUTUw9eS52YWx1ZX10LmNsYXNzTmFtZT11O3QucmVzdWx0PXtsYW5ndWFnZTp2LGt3Onkua2V5d29yZF9jb3VudCxyZTp5LnJ9O2lmKHkuc2Vjb25kX2Jlc3Qpe3Quc2Vjb25kX2Jlc3Q9e2xhbmd1YWdlOnkuc2Vjb25kX2Jlc3QubGFuZ3VhZ2Usa3c6eS5zZWNvbmRfYmVzdC5rZXl3b3JkX2NvdW50LHJlOnkuc2Vjb25kX2Jlc3Qucn19fWZ1bmN0aW9uIG8oKXtpZihvLmNhbGxlZCl7cmV0dXJufW8uY2FsbGVkPXRydWU7dmFyIHI9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInByZSIpO2Zvcih2YXIgcD0wO3A8ci5sZW5ndGg7cCsrKXt2YXIgcT1iKHJbcF0pO2lmKHEpe24ocSxobGpzLnRhYlJlcGxhY2UpfX19ZnVuY3Rpb24gbCgpe2lmKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsbyxmYWxzZSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLG8sZmFsc2UpfWVsc2V7aWYod2luZG93LmF0dGFjaEV2ZW50KXt3aW5kb3cuYXR0YWNoRXZlbnQoIm9ubG9hZCIsbyl9ZWxzZXt3aW5kb3cub25sb2FkPW99fX12YXIgZT17fTt0aGlzLkxBTkdVQUdFUz1lO3RoaXMuaGlnaGxpZ2h0PWQ7dGhpcy5oaWdobGlnaHRBdXRvPWc7dGhpcy5maXhNYXJrdXA9aTt0aGlzLmhpZ2hsaWdodEJsb2NrPW47dGhpcy5pbml0SGlnaGxpZ2h0aW5nPW87dGhpcy5pbml0SGlnaGxpZ2h0aW5nT25Mb2FkPWw7dGhpcy5JUj0iW2EtekEtWl1bYS16QS1aMC05X10qIjt0aGlzLlVJUj0iW2EtekEtWl9dW2EtekEtWjAtOV9dKiI7dGhpcy5OUj0iXFxiXFxkKyhcXC5cXGQrKT8iO3RoaXMuQ05SPSJcXGIoMFt4WF1bYS1mQS1GMC05XSt8KFxcZCsoXFwuXFxkKik/fFxcLlxcZCspKFtlRV1bLStdP1xcZCspPykiO3RoaXMuQk5SPSJcXGIoMGJbMDFdKykiO3RoaXMuUlNSPSIhfCE9fCE9PXwlfCU9fCZ8JiZ8Jj18XFwqfFxcKj18XFwrfFxcKz18LHxcXC58LXwtPXwvfC89fDp8O3w8fDw8fDw8PXw8PXw9fD09fD09PXw+fD49fD4+fD4+PXw+Pj58Pj4+PXxcXD98XFxbfFxce3xcXCh8XFxefFxcXj18XFx8fFxcfD18XFx8XFx8fH4iO3RoaXMuRVI9Iig/IVtcXHNcXFNdKSI7dGhpcy5CRT17YjoiXFxcXC4iLHI6MH07dGhpcy5BU009e2NOOiJzdHJpbmciLGI6IiciLGU6IiciLGk6IlxcbiIsYzpbdGhpcy5CRV0scjowfTt0aGlzLlFTTT17Y046InN0cmluZyIsYjonIicsZTonIicsaToiXFxuIixjOlt0aGlzLkJFXSxyOjB9O3RoaXMuQ0xDTT17Y046ImNvbW1lbnQiLGI6Ii8vIixlOiIkIn07dGhpcy5DQkxDTE09e2NOOiJjb21tZW50IixiOiIvXFwqIixlOiJcXCovIn07dGhpcy5IQ009e2NOOiJjb21tZW50IixiOiIjIixlOiIkIn07dGhpcy5OTT17Y046Im51bWJlciIsYjp0aGlzLk5SLHI6MH07dGhpcy5DTk09e2NOOiJudW1iZXIiLGI6dGhpcy5DTlIscjowfTt0aGlzLkJOTT17Y046Im51bWJlciIsYjp0aGlzLkJOUixyOjB9O3RoaXMuaW5oZXJpdD1mdW5jdGlvbihyLHMpe3ZhciBwPXt9O2Zvcih2YXIgcSBpbiByKXtwW3FdPXJbcV19aWYocyl7Zm9yKHZhciBxIGluIHMpe3BbcV09c1txXX19cmV0dXJuIHB9fSgpO2hsanMuTEFOR1VBR0VTLmJhc2g9ZnVuY3Rpb24oKXt2YXIgZT17InRydWUiOjEsImZhbHNlIjoxfTt2YXIgYj17Y046InZhcmlhYmxlIixiOiJcXCQoW2EtekEtWjAtOV9dKylcXGIifTt2YXIgYT17Y046InZhcmlhYmxlIixiOiJcXCRcXHsoKFtefV0pfChcXFxcfSkpK1xcfSIsYzpbaGxqcy5DTk1dfTt2YXIgZj17Y046InN0cmluZyIsYjonIicsZTonIicsaToiXFxuIixjOltobGpzLkJFLGIsYV0scjowfTt2YXIgYz17Y046InN0cmluZyIsYjoiJyIsZToiJyIsYzpbe2I6IicnIn1dLHI6MH07dmFyIGQ9e2NOOiJ0ZXN0X2NvbmRpdGlvbiIsYjoiIixlOiIiLGM6W2YsYyxiLGEsaGxqcy5DTk1dLGs6e2xpdGVyYWw6ZX0scjowfTtyZXR1cm57ZE06e2s6e2tleXdvcmQ6eyJpZiI6MSx0aGVuOjEsImVsc2UiOjEsZmk6MSwiZm9yIjoxLCJicmVhayI6MSwiY29udGludWUiOjEsIndoaWxlIjoxLCJpbiI6MSwiZG8iOjEsZG9uZToxLGVjaG86MSxleGl0OjEsInJldHVybiI6MSxzZXQ6MSxkZWNsYXJlOjF9LGxpdGVyYWw6ZX0sYzpbe2NOOiJzaGViYW5nIixiOiIoIyFcXC9iaW5cXC9iYXNoKXwoIyFcXC9iaW5cXC9zaCkiLHI6MTB9LGIsYSxobGpzLkhDTSxobGpzLkNOTSxmLGMsaGxqcy5pbmhlcml0KGQse2I6IlxcWyAiLGU6IiBcXF0iLHI6MH0pLGhsanMuaW5oZXJpdChkLHtiOiJcXFtcXFsgIixlOiIgXFxdXFxdIn0pXX19fSgpO2hsanMuTEFOR1VBR0VTLmNwcD1mdW5jdGlvbigpe3ZhciBhPXtrZXl3b3JkOnsiZmFsc2UiOjEsImludCI6MSwiZmxvYXQiOjEsIndoaWxlIjoxLCJwcml2YXRlIjoxLCJjaGFyIjoxLCJjYXRjaCI6MSwiZXhwb3J0IjoxLHZpcnR1YWw6MSxvcGVyYXRvcjoyLHNpemVvZjoyLGR5bmFtaWNfY2FzdDoyLHR5cGVkZWY6Mixjb25zdF9jYXN0OjIsImNvbnN0IjoxLHN0cnVjdDoxLCJmb3IiOjEsc3RhdGljX2Nhc3Q6Mix1bmlvbjoxLG5hbWVzcGFjZToxLHVuc2lnbmVkOjEsImxvbmciOjEsInRocm93IjoxLCJ2b2xhdGlsZSI6Miwic3RhdGljIjoxLCJwcm90ZWN0ZWQiOjEsYm9vbDoxLHRlbXBsYXRlOjEsbXV0YWJsZToxLCJpZiI6MSwicHVibGljIjoxLGZyaWVuZDoyLCJkbyI6MSwicmV0dXJuIjoxLCJnb3RvIjoxLGF1dG86MSwidm9pZCI6MiwiZW51bSI6MSwiZWxzZSI6MSwiYnJlYWsiOjEsIm5ldyI6MSxleHRlcm46MSx1c2luZzoxLCJ0cnVlIjoxLCJjbGFzcyI6MSxhc206MSwiY2FzZSI6MSx0eXBlaWQ6MSwic2hvcnQiOjEscmVpbnRlcnByZXRfY2FzdDoyLCJkZWZhdWx0IjoxLCJkb3VibGUiOjEscmVnaXN0ZXI6MSxleHBsaWNpdDoxLHNpZ25lZDoxLHR5cGVuYW1lOjEsInRyeSI6MSwidGhpcyI6MSwic3dpdGNoIjoxLCJjb250aW51ZSI6MSx3Y2hhcl90OjEsaW5saW5lOjEsImRlbGV0ZSI6MSxhbGlnbm9mOjEsY2hhcjE2X3Q6MSxjaGFyMzJfdDoxLGNvbnN0ZXhwcjoxLGRlY2x0eXBlOjEsbm9leGNlcHQ6MSxudWxscHRyOjEsc3RhdGljX2Fzc2VydDoxLHRocmVhZF9sb2NhbDoxLHJlc3RyaWN0OjEsX0Jvb2w6MSxjb21wbGV4OjF9LGJ1aWx0X2luOntzdGQ6MSxzdHJpbmc6MSxjaW46MSxjb3V0OjEsY2VycjoxLGNsb2c6MSxzdHJpbmdzdHJlYW06MSxpc3RyaW5nc3RyZWFtOjEsb3N0cmluZ3N0cmVhbToxLGF1dG9fcHRyOjEsZGVxdWU6MSxsaXN0OjEscXVldWU6MSxzdGFjazoxLHZlY3RvcjoxLG1hcDoxLHNldDoxLGJpdHNldDoxLG11bHRpc2V0OjEsbXVsdGltYXA6MSx1bm9yZGVyZWRfc2V0OjEsdW5vcmRlcmVkX21hcDoxLHVub3JkZXJlZF9tdWx0aXNldDoxLHVub3JkZXJlZF9tdWx0aW1hcDoxLGFycmF5OjEsc2hhcmVkX3B0cjoxfX07cmV0dXJue2RNOntrOmEsaToiPC8iLGM6W2hsanMuQ0xDTSxobGpzLkNCTENMTSxobGpzLlFTTSx7Y046InN0cmluZyIsYjoiJ1xcXFw/LiIsZToiJyIsaToiLiJ9LHtjTjoibnVtYmVyIixiOiJcXGIoXFxkKyhcXC5cXGQqKT98XFwuXFxkKykodXxVfGx8THx1bHxVTHxmfEYpIn0saGxqcy5DTk0se2NOOiJwcmVwcm9jZXNzb3IiLGI6IiMiLGU6IiQifSx7Y046InN0bF9jb250YWluZXIiLGI6IlxcYihkZXF1ZXxsaXN0fHF1ZXVlfHN0YWNrfHZlY3RvcnxtYXB8c2V0fGJpdHNldHxtdWx0aXNldHxtdWx0aW1hcHx1bm9yZGVyZWRfbWFwfHVub3JkZXJlZF9zZXR8dW5vcmRlcmVkX211bHRpc2V0fHVub3JkZXJlZF9tdWx0aW1hcHxhcnJheSlcXHMqPCIsZToiPiIsazphLHI6MTAsYzpbInNlbGYiXX1dfX19KCk7aGxqcy5MQU5HVUFHRVMuY3NzPWZ1bmN0aW9uKCl7dmFyIGE9e2NOOiJmdW5jdGlvbiIsYjpobGpzLklSKyJcXCgiLGU6IlxcKSIsYzpbe2VXOnRydWUsZUU6dHJ1ZSxjOltobGpzLk5NLGhsanMuQVNNLGhsanMuUVNNXX1dfTtyZXR1cm57Y0k6dHJ1ZSxkTTp7aToiWz0vfCddIixjOltobGpzLkNCTENMTSx7Y046ImlkIixiOiJcXCNbQS1aYS16MC05Xy1dKyJ9LHtjTjoiY2xhc3MiLGI6IlxcLltBLVphLXowLTlfLV0rIixyOjB9LHtjTjoiYXR0cl9zZWxlY3RvciIsYjoiXFxbIixlOiJcXF0iLGk6IiQifSx7Y046InBzZXVkbyIsYjoiOig6KT9bYS16QS1aMC05XFxfXFwtXFwrXFwoXFwpXFxcIlxcJ10rIn0se2NOOiJhdF9ydWxlIixiOiJAKGZvbnQtZmFjZXxwYWdlKSIsbDoiW2Etei1dKyIsazp7ImZvbnQtZmFjZSI6MSxwYWdlOjF9fSx7Y046ImF0X3J1bGUiLGI6IkAiLGU6Ilt7O10iLGVFOnRydWUsazp7ImltcG9ydCI6MSxwYWdlOjEsbWVkaWE6MSxjaGFyc2V0OjF9LGM6W2EsaGxqcy5BU00saGxqcy5RU00saGxqcy5OTV19LHtjTjoidGFnIixiOmhsanMuSVIscjowfSx7Y046InJ1bGVzIixiOiJ7IixlOiJ9IixpOiJbXlxcc10iLHI6MCxjOltobGpzLkNCTENMTSx7Y046InJ1bGUiLGI6IlteXFxzXSIsckI6dHJ1ZSxlOiI7IixlVzp0cnVlLGM6W3tjTjoiYXR0cmlidXRlIixiOiJbQS1aXFxfXFwuXFwtXSsiLGU6IjoiLGVFOnRydWUsaToiW15cXHNdIixzdGFydHM6e2NOOiJ2YWx1ZSIsZVc6dHJ1ZSxlRTp0cnVlLGM6W2EsaGxqcy5OTSxobGpzLlFTTSxobGpzLkFTTSxobGpzLkNCTENMTSx7Y046ImhleGNvbG9yIixiOiJcXCNbMC05QS1GXSsifSx7Y046ImltcG9ydGFudCIsYjoiIWltcG9ydGFudCJ9XX19XX1dfV19fX0oKTtobGpzLkxBTkdVQUdFUy5pbmk9e2NJOnRydWUsZE06e2k6IlteXFxzXSIsYzpbe2NOOiJjb21tZW50IixiOiI7IixlOiIkIn0se2NOOiJ0aXRsZSIsYjoiXlxcWyIsZToiXFxdIn0se2NOOiJzZXR0aW5nIixiOiJeW2EtejAtOV9cXFtcXF1dK1sgXFx0XSo9WyBcXHRdKiIsZToiJCIsYzpbe2NOOiJ2YWx1ZSIsZVc6dHJ1ZSxrOntvbjoxLG9mZjoxLCJ0cnVlIjoxLCJmYWxzZSI6MSx5ZXM6MSxubzoxfSxjOltobGpzLlFTTSxobGpzLk5NXX1dfV19fTtobGpzLkxBTkdVQUdFUy5wZXJsPWZ1bmN0aW9uKCl7dmFyIGQ9e2dldHB3ZW50OjEsZ2V0c2VydmVudDoxLHF1b3RlbWV0YToxLG1zZ3JjdjoxLHNjYWxhcjoxLGtpbGw6MSxkYm1jbG9zZToxLHVuZGVmOjEsbGM6MSxtYToxLHN5c3dyaXRlOjEsdHI6MSxzZW5kOjEsdW1hc2s6MSxzeXNvcGVuOjEsc2htd3JpdGU6MSx2ZWM6MSxxeDoxLHV0aW1lOjEsbG9jYWw6MSxvY3Q6MSxzZW1jdGw6MSxsb2NhbHRpbWU6MSxyZWFkcGlwZToxLCJkbyI6MSwicmV0dXJuIjoxLGZvcm1hdDoxLHJlYWQ6MSxzcHJpbnRmOjEsZGJtb3BlbjoxLHBvcDoxLGdldHBncnA6MSxub3Q6MSxnZXRwd25hbToxLHJld2luZGRpcjoxLHFxOjEsZmlsZW5vOjEscXc6MSxlbmRwcm90b2VudDoxLHdhaXQ6MSxzZXRob3N0ZW50OjEsYmxlc3M6MSxzOjAsb3BlbmRpcjoxLCJjb250aW51ZSI6MSxlYWNoOjEsc2xlZXA6MSxlbmRncmVudDoxLHNodXRkb3duOjEsZHVtcDoxLGNob21wOjEsY29ubmVjdDoxLGdldHNvY2tuYW1lOjEsZGllOjEsc29ja2V0cGFpcjoxLGNsb3NlOjEsZmxvY2s6MSxleGlzdHM6MSxpbmRleDoxLHNobWdldDoxLHN1YjoxLCJmb3IiOjEsZW5kcHdlbnQ6MSxyZWRvOjEsbHN0YXQ6MSxtc2djdGw6MSxzZXRwZ3JwOjEsYWJzOjEsZXhpdDoxLHNlbGVjdDoxLHByaW50OjEscmVmOjEsZ2V0aG9zdGJ5YWRkcjoxLHVuc2hpZnQ6MSxmY250bDoxLHN5c2NhbGw6MSwiZ290byI6MSxnZXRuZXRieWFkZHI6MSxqb2luOjEsZ210aW1lOjEsc3ltbGluazoxLHNlbWdldDoxLHNwbGljZToxLHg6MCxnZXRwZWVybmFtZToxLHJlY3Y6MSxsb2c6MSxzZXRzb2Nrb3B0OjEsY29zOjEsbGFzdDoxLHJldmVyc2U6MSxnZXRob3N0YnluYW1lOjEsZ2V0Z3JuYW06MSxzdHVkeToxLGZvcm1saW5lOjEsZW5kaG9zdGVudDoxLHRpbWVzOjEsY2hvcDoxLGxlbmd0aDoxLGdldGhvc3RlbnQ6MSxnZXRuZXRlbnQ6MSxwYWNrOjEsZ2V0cHJvdG9lbnQ6MSxnZXRzZXJ2YnluYW1lOjEscmFuZDoxLG1rZGlyOjEscG9zOjEsY2htb2Q6MSx5OjAsc3Vic3RyOjEsZW5kbmV0ZW50OjEscHJpbnRmOjEsbmV4dDoxLG9wZW46MSxtc2dzbmQ6MSxyZWFkZGlyOjEsdXNlOjEsdW5saW5rOjEsZ2V0c29ja29wdDoxLGdldHByaW9yaXR5OjEscmluZGV4OjEsd2FudGFycmF5OjEsaGV4OjEsc3lzdGVtOjEsZ2V0c2VydmJ5cG9ydDoxLGVuZHNlcnZlbnQ6MSwiaW50IjoxLGNocjoxLHVudGllOjEscm1kaXI6MSxwcm90b3R5cGU6MSx0ZWxsOjEsbGlzdGVuOjEsZm9yazoxLHNobXJlYWQ6MSx1Y2ZpcnN0OjEsc2V0cHJvdG9lbnQ6MSwiZWxzZSI6MSxzeXNzZWVrOjEsbGluazoxLGdldGdyZ2lkOjEsc2htY3RsOjEsd2FpdHBpZDoxLHVucGFjazoxLGdldG5ldGJ5bmFtZToxLHJlc2V0OjEsY2hkaXI6MSxncmVwOjEsc3BsaXQ6MSxyZXF1aXJlOjEsY2FsbGVyOjEsbGNmaXJzdDoxLHVudGlsOjEsd2FybjoxLCJ3aGlsZSI6MSx2YWx1ZXM6MSxzaGlmdDoxLHRlbGxkaXI6MSxnZXRwd3VpZDoxLG15OjEsZ2V0cHJvdG9ieW51bWJlcjoxLCJkZWxldGUiOjEsYW5kOjEsc29ydDoxLHVjOjEsZGVmaW5lZDoxLHNyYW5kOjEsYWNjZXB0OjEsInBhY2thZ2UiOjEsc2Vla2RpcjoxLGdldHByb3RvYnluYW1lOjEsc2Vtb3A6MSxvdXI6MSxyZW5hbWU6MSxzZWVrOjEsImlmIjoxLHE6MCxjaHJvb3Q6MSxzeXNyZWFkOjEsc2V0cHdlbnQ6MSxubzoxLGNyeXB0OjEsZ2V0YzoxLGNob3duOjEsc3FydDoxLHdyaXRlOjEsc2V0bmV0ZW50OjEsc2V0cHJpb3JpdHk6MSxmb3JlYWNoOjEsdGllOjEsc2luOjEsbXNnZ2V0OjEsbWFwOjEsc3RhdDoxLGdldGxvZ2luOjEsdW5sZXNzOjEsZWxzaWY6MSx0cnVuY2F0ZToxLGV4ZWM6MSxrZXlzOjEsZ2xvYjoxLHRpZWQ6MSxjbG9zZWRpcjoxLGlvY3RsOjEsc29ja2V0OjEscmVhZGxpbms6MSwiZXZhbCI6MSx4b3I6MSxyZWFkbGluZToxLGJpbm1vZGU6MSxzZXRzZXJ2ZW50OjEsZW9mOjEsb3JkOjEsYmluZDoxLGFsYXJtOjEscGlwZToxLGF0YW4yOjEsZ2V0Z3JlbnQ6MSxleHA6MSx0aW1lOjEscHVzaDoxLHNldGdyZW50OjEsZ3Q6MSxsdDoxLG9yOjEsbmU6MSxtOjB9O3ZhciBmPXtjTjoic3Vic3QiLGI6IlskQF1cXHsiLGU6IlxcfSIsazpkLHI6MTB9O3ZhciBjPXtjTjoidmFyaWFibGUiLGI6IlxcJFxcZCJ9O3ZhciBiPXtjTjoidmFyaWFibGUiLGI6IltcXCRcXCVcXEBcXCpdKFxcXlxcd1xcYnwjXFx3KyhcXDpcXDpcXHcrKSp8W15cXHNcXHd7XXx7XFx3K318XFx3KyhcXDpcXDpcXHcqKSopIn07dmFyIGg9W2hsanMuQkUsZixjLGJdO3ZhciBnPXtiOiItPiIsYzpbe2I6aGxqcy5JUn0se2I6InsiLGU6In0ifV19O3ZhciBlPXtjTjoiY29tbWVudCIsYjoiXihfX0VORF9ffF9fREFUQV9fKSIsZToiXFxuJCIscjo1fTt2YXIgYT1bYyxiLGhsanMuSENNLGUsZyx7Y046InN0cmluZyIsYjoicVtxd3hyXT9cXHMqXFwoIixlOiJcXCkiLGM6aCxyOjV9LHtjTjoic3RyaW5nIixiOiJxW3F3eHJdP1xccypcXFsiLGU6IlxcXSIsYzpoLHI6NX0se2NOOiJzdHJpbmciLGI6InFbcXd4cl0/XFxzKlxceyIsZToiXFx9IixjOmgscjo1fSx7Y046InN0cmluZyIsYjoicVtxd3hyXT9cXHMqXFx8IixlOiJcXHwiLGM6aCxyOjV9LHtjTjoic3RyaW5nIixiOiJxW3F3eHJdP1xccypcXDwiLGU6IlxcPiIsYzpoLHI6NX0se2NOOiJzdHJpbmciLGI6InF3XFxzK3EiLGU6InEiLGM6aCxyOjV9LHtjTjoic3RyaW5nIixiOiInIixlOiInIixjOltobGpzLkJFXSxyOjB9LHtjTjoic3RyaW5nIixiOiciJyxlOiciJyxjOmgscjowfSx7Y046InN0cmluZyIsYjoiYCIsZToiYCIsYzpbaGxqcy5CRV19LHtjTjoic3RyaW5nIixiOiJ7XFx3K30iLHI6MH0se2NOOiJzdHJpbmciLGI6Ii0/XFx3K1xccypcXD1cXD4iLHI6MH0se2NOOiJudW1iZXIiLGI6IihcXGIwWzAtN19dKyl8KFxcYjB4WzAtOWEtZkEtRl9dKyl8KFxcYlsxLTldWzAtOV9dKihcXC5bMC05X10rKT8pfFswX11cXGIiLHI6MH0se2I6IigiK2hsanMuUlNSKyJ8XFxiKHNwbGl0fHJldHVybnxwcmludHxyZXZlcnNlfGdyZXApXFxiKVxccyoiLGs6e3NwbGl0OjEsInJldHVybiI6MSxwcmludDoxLHJldmVyc2U6MSxncmVwOjF9LHI6MCxjOltobGpzLkhDTSxlLHtjTjoicmVnZXhwIixiOiIoc3x0cnx5KS8oXFxcXC58W14vXSkqLyhcXFxcLnxbXi9dKSovW2Etel0qIixyOjEwfSx7Y046InJlZ2V4cCIsYjoiKG18cXIpPy8iLGU6Ii9bYS16XSoiLGM6W2hsanMuQkVdLHI6MH1dfSx7Y046InN1YiIsYjoiXFxic3ViXFxiIixlOiIoXFxzKlxcKC4qP1xcKSk/Wzt7XSIsazp7c3ViOjF9LHI6NX0se2NOOiJvcGVyYXRvciIsYjoiLVxcd1xcYiIscjowfSx7Y046InBvZCIsYjoiXFw9XFx3IixlOiJcXD1jdXQifV07Zi5jPWE7Zy5jWzFdLmM9YTtyZXR1cm57ZE06e2s6ZCxjOmF9fX0oKTtobGpzLkxBTkdVQUdFUy5weXRob249ZnVuY3Rpb24oKXt2YXIgYj1be2NOOiJzdHJpbmciLGI6Iih1fGIpP3I/JycnIixlOiInJyciLHI6MTB9LHtjTjoic3RyaW5nIixiOicodXxiKT9yPyIiIicsZTonIiIiJyxyOjEwfSx7Y046InN0cmluZyIsYjoiKHV8cnx1ciknIixlOiInIixjOltobGpzLkJFXSxyOjEwfSx7Y046InN0cmluZyIsYjonKHV8cnx1cikiJyxlOiciJyxjOltobGpzLkJFXSxyOjEwfSx7Y046InN0cmluZyIsYjoiKGJ8YnIpJyIsZToiJyIsYzpbaGxqcy5CRV19LHtjTjoic3RyaW5nIixiOicoYnxicikiJyxlOiciJyxjOltobGpzLkJFXX1dLmNvbmNhdChbaGxqcy5BU00saGxqcy5RU01dKTt2YXIgZD17Y046InRpdGxlIixiOmhsanMuVUlSfTt2YXIgYz17Y046InBhcmFtcyIsYjoiXFwoIixlOiJcXCkiLGM6Yi5jb25jYXQoW2hsanMuQ05NXSl9O3ZhciBhPXtiV0s6dHJ1ZSxlOiI6IixpOiJbJHtdIixjOltkLGNdLHI6MTB9O3JldHVybntkTTp7azp7a2V5d29yZDp7YW5kOjEsZWxpZjoxLGlzOjEsZ2xvYmFsOjEsYXM6MSwiaW4iOjEsImlmIjoxLGZyb206MSxyYWlzZToxLCJmb3IiOjEsZXhjZXB0OjEsImZpbmFsbHkiOjEscHJpbnQ6MSwiaW1wb3J0IjoxLHBhc3M6MSwicmV0dXJuIjoxLGV4ZWM6MSwiZWxzZSI6MSwiYnJlYWsiOjEsbm90OjEsIndpdGgiOjEsImNsYXNzIjoxLGFzc2VydDoxLHlpZWxkOjEsInRyeSI6MSwid2hpbGUiOjEsImNvbnRpbnVlIjoxLGRlbDoxLG9yOjEsZGVmOjEsbGFtYmRhOjEsbm9ubG9jYWw6MTB9LGJ1aWx0X2luOntOb25lOjEsVHJ1ZToxLEZhbHNlOjEsRWxsaXBzaXM6MSxOb3RJbXBsZW1lbnRlZDoxfX0saToiKDwvfC0+fFxcPykiLGM6Yi5jb25jYXQoW2hsanMuSENNLGhsanMuaW5oZXJpdChhLHtjTjoiZnVuY3Rpb24iLGs6e2RlZjoxfX0pLGhsanMuaW5oZXJpdChhLHtjTjoiY2xhc3MiLGs6eyJjbGFzcyI6MX19KSxobGpzLkNOTSx7Y046ImRlY29yYXRvciIsYjoiQCIsZToiJCJ9XSl9fX0oKTtobGpzLkxBTkdVQUdFUy5yPXtkTTp7YzpbaGxqcy5IQ00se2NOOiJudW1iZXIiLGI6IlxcYjBbeFhdWzAtOWEtZkEtRl0rW0xpXT9cXGIiLGU6aGxqcy5JTU1FRElBVEVfUkUscjowfSx7Y046Im51bWJlciIsYjoiXFxiXFxkKyg/OltlRV1bK1xcLV0/XFxkKik/TFxcYiIsZTpobGpzLklNTUVESUFURV9SRSxyOjB9LHtjTjoibnVtYmVyIixiOiJcXGJcXGQrXFwuKD8hXFxkKSg/OmlcXGIpPyIsZTpobGpzLklNTUVESUFURV9SRSxyOjF9LHtjTjoibnVtYmVyIixiOiJcXGJcXGQrKD86XFwuXFxkKik/KD86W2VFXVsrXFwtXT9cXGQqKT9pP1xcYiIsZTpobGpzLklNTUVESUFURV9SRSxyOjB9LHtjTjoibnVtYmVyIixiOiJcXC5cXGQrKD86W2VFXVsrXFwtXT9cXGQqKT9pP1xcYiIsZTpobGpzLklNTUVESUFURV9SRSxyOjF9LHtjTjoia2V5d29yZCIsYjoiKD86dHJ5Q2F0Y2h8bGlicmFyeXxzZXRHZW5lcmljfHNldEdyb3VwR2VuZXJpYylcXGIiLGU6aGxqcy5JTU1FRElBVEVfUkUscjoxMH0se2NOOiJrZXl3b3JkIixiOiJcXC5cXC5cXC4iLGU6aGxqcy5JTU1FRElBVEVfUkUscjoxMH0se2NOOiJrZXl3b3JkIixiOiJcXC5cXC5cXGQrKD8hW1xcdy5dKSIsZTpobGpzLklNTUVESUFURV9SRSxyOjEwfSx7Y046ImtleXdvcmQiLGI6IlxcYig/OmZ1bmN0aW9uKSIsZTpobGpzLklNTUVESUFURV9SRSxyOjJ9LHtjTjoia2V5d29yZCIsYjoiKD86aWZ8aW58YnJlYWt8bmV4dHxyZXBlYXR8ZWxzZXxmb3J8cmV0dXJufHN3aXRjaHx3aGlsZXx0cnl8c3RvcHx3YXJuaW5nfHJlcXVpcmV8YXR0YWNofGRldGFjaHxzb3VyY2V8c2V0TWV0aG9kfHNldENsYXNzKVxcYiIsZTpobGpzLklNTUVESUFURV9SRSxyOjF9LHtjTjoibGl0ZXJhbCIsYjoiKD86TkF8TkFfaW50ZWdlcl98TkFfcmVhbF98TkFfY2hhcmFjdGVyX3xOQV9jb21wbGV4XylcXGIiLGU6aGxqcy5JTU1FRElBVEVfUkUscjoxMH0se2NOOiJsaXRlcmFsIixiOiIoPzpOVUxMfFRSVUV8RkFMU0V8VHxGfEluZnxOYU4pXFxiIixlOmhsanMuSU1NRURJQVRFX1JFLHI6MX0se2NOOiJpZGVudGlmaWVyIixiOiJbYS16QS1aLl1bYS16QS1aMC05Ll9dKlxcYiIsZTpobGpzLklNTUVESUFURV9SRSxyOjB9LHtjTjoib3BlcmF0b3IiLGI6IjxcXC0oPyFcXHMqXFxkKSIsZTpobGpzLklNTUVESUFURV9SRSxyOjJ9LHtjTjoib3BlcmF0b3IiLGI6IlxcLT58PFxcLSIsZTpobGpzLklNTUVESUFURV9SRSxyOjF9LHtjTjoib3BlcmF0b3IiLGI6IiUlfH4iLGU6aGxqcy5JTU1FRElBVEVfUkV9LHtjTjoib3BlcmF0b3IiLGI6Ij49fDw9fD09fCE9fFxcfFxcfHwmJnw9fFxcK3xcXC18XFwqfC98XFxefD58PHwhfCZ8XFx8fFxcJHw6IixlOmhsanMuSU1NRURJQVRFX1JFLHI6MH0se2NOOiJvcGVyYXRvciIsYjoiJSIsZToiJSIsaToiXFxuIixyOjF9LHtjTjoiaWRlbnRpZmllciIsYjoiYCIsZToiYCIscjowfSx7Y046InN0cmluZyIsYjonIicsZTonIicsYzpbaGxqcy5CRV0scjowfSx7Y046InN0cmluZyIsYjoiJyIsZToiJyIsYzpbaGxqcy5CRV0scjowfSx7Y046InBhcmVuIixiOiJbWyh7XFxdKX1dIixlOmhsanMuSU1NRURJQVRFX1JFLHI6MH1dfX07aGxqcy5MQU5HVUFHRVMucnVieT1mdW5jdGlvbigpe3ZhciBhPSJbYS16QS1aX11bYS16QS1aMC05X10qKFxcIXxcXD8pPyI7dmFyIGo9IlthLXpBLVpfXVxcdypbIT89XT98Wy0rfl1cXEB8PDx8Pj58PX58PT09P3w8PT58Wzw+XT0/fFxcKlxcKnxbLS8rJV4mKn5gfF18XFxbXFxdPT8iO3ZhciBmPXtrZXl3b3JkOnthbmQ6MSwiZmFsc2UiOjEsdGhlbjoxLGRlZmluZWQ6MSxtb2R1bGU6MSwiaW4iOjEsInJldHVybiI6MSxyZWRvOjEsImlmIjoxLEJFR0lOOjEscmV0cnk6MSxlbmQ6MSwiZm9yIjoxLCJ0cnVlIjoxLHNlbGY6MSx3aGVuOjEsbmV4dDoxLHVudGlsOjEsImRvIjoxLGJlZ2luOjEsdW5sZXNzOjEsRU5EOjEscmVzY3VlOjEsbmlsOjEsImVsc2UiOjEsImJyZWFrIjoxLHVuZGVmOjEsbm90OjEsInN1cGVyIjoxLCJjbGFzcyI6MSwiY2FzZSI6MSxyZXF1aXJlOjEseWllbGQ6MSxhbGlhczoxLCJ3aGlsZSI6MSxlbnN1cmU6MSxlbHNpZjoxLG9yOjEsZGVmOjF9LGtleW1ldGhvZHM6e19faWRfXzoxLF9fc2VuZF9fOjEsYWJvcnQ6MSxhYnM6MSwiYWxsPyI6MSxhbGxvY2F0ZToxLGFuY2VzdG9yczoxLCJhbnk/IjoxLGFyaXR5OjEsYXNzb2M6MSxhdDoxLGF0X2V4aXQ6MSxhdXRvbG9hZDoxLCJhdXRvbG9hZD8iOjEsImJldHdlZW4/IjoxLGJpbmRpbmc6MSxiaW5tb2RlOjEsImJsb2NrX2dpdmVuPyI6MSxjYWxsOjEsY2FsbGNjOjEsY2FsbGVyOjEsY2FwaXRhbGl6ZToxLCJjYXBpdGFsaXplISI6MSxjYXNlY21wOjEsImNhdGNoIjoxLGNlaWw6MSxjZW50ZXI6MSxjaG9tcDoxLCJjaG9tcCEiOjEsY2hvcDoxLCJjaG9wISI6MSxjaHI6MSwiY2xhc3MiOjEsY2xhc3NfZXZhbDoxLCJjbGFzc192YXJpYWJsZV9kZWZpbmVkPyI6MSxjbGFzc192YXJpYWJsZXM6MSxjbGVhcjoxLGNsb25lOjEsY2xvc2U6MSxjbG9zZV9yZWFkOjEsY2xvc2Vfd3JpdGU6MSwiY2xvc2VkPyI6MSxjb2VyY2U6MSxjb2xsZWN0OjEsImNvbGxlY3QhIjoxLGNvbXBhY3Q6MSwiY29tcGFjdCEiOjEsY29uY2F0OjEsImNvbnN0X2RlZmluZWQ/IjoxLGNvbnN0X2dldDoxLGNvbnN0X21pc3Npbmc6MSxjb25zdF9zZXQ6MSxjb25zdGFudHM6MSxjb3VudDoxLGNyeXB0OjEsImRlZmF1bHQiOjEsZGVmYXVsdF9wcm9jOjEsImRlbGV0ZSI6MSwiZGVsZXRlISI6MSxkZWxldGVfYXQ6MSxkZWxldGVfaWY6MSxkZXRlY3Q6MSxkaXNwbGF5OjEsZGl2OjEsZGl2bW9kOjEsZG93bmNhc2U6MSwiZG93bmNhc2UhIjoxLGRvd250bzoxLGR1bXA6MSxkdXA6MSxlYWNoOjEsZWFjaF9ieXRlOjEsZWFjaF9pbmRleDoxLGVhY2hfa2V5OjEsZWFjaF9saW5lOjEsZWFjaF9wYWlyOjEsZWFjaF92YWx1ZToxLGVhY2hfd2l0aF9pbmRleDoxLCJlbXB0eT8iOjEsZW50cmllczoxLGVvZjoxLCJlb2Y/IjoxLCJlcWw/IjoxLCJlcXVhbD8iOjEsImV2YWwiOjEsZXhlYzoxLGV4aXQ6MSwiZXhpdCEiOjEsZXh0ZW5kOjEsZmFpbDoxLGZjbnRsOjEsZmV0Y2g6MSxmaWxlbm86MSxmaWxsOjEsZmluZDoxLGZpbmRfYWxsOjEsZmlyc3Q6MSxmbGF0dGVuOjEsImZsYXR0ZW4hIjoxLGZsb29yOjEsZmx1c2g6MSxmb3JfZmQ6MSxmb3JlYWNoOjEsZm9yazoxLGZvcm1hdDoxLGZyZWV6ZToxLCJmcm96ZW4/IjoxLGZzeW5jOjEsZ2V0YzoxLGdldHM6MSxnbG9iYWxfdmFyaWFibGVzOjEsZ3JlcDoxLGdzdWI6MSwiZ3N1YiEiOjEsImhhc19rZXk/IjoxLCJoYXNfdmFsdWU/IjoxLGhhc2g6MSxoZXg6MSxpZDoxLGluY2x1ZGU6MSwiaW5jbHVkZT8iOjEsaW5jbHVkZWRfbW9kdWxlczoxLGluZGV4OjEsaW5kZXhlczoxLGluZGljZXM6MSxpbmR1Y2VkX2Zyb206MSxpbmplY3Q6MSxpbnNlcnQ6MSxpbnNwZWN0OjEsaW5zdGFuY2VfZXZhbDoxLGluc3RhbmNlX21ldGhvZDoxLGluc3RhbmNlX21ldGhvZHM6MSwiaW5zdGFuY2Vfb2Y/IjoxLCJpbnN0YW5jZV92YXJpYWJsZV9kZWZpbmVkPyI6MSxpbnN0YW5jZV92YXJpYWJsZV9nZXQ6MSxpbnN0YW5jZV92YXJpYWJsZV9zZXQ6MSxpbnN0YW5jZV92YXJpYWJsZXM6MSwiaW50ZWdlcj8iOjEsaW50ZXJuOjEsaW52ZXJ0OjEsaW9jdGw6MSwiaXNfYT8iOjEsaXNhdHR5OjEsIml0ZXJhdG9yPyI6MSxqb2luOjEsImtleT8iOjEsa2V5czoxLCJraW5kX29mPyI6MSxsYW1iZGE6MSxsYXN0OjEsbGVuZ3RoOjEsbGluZW5vOjEsbGp1c3Q6MSxsb2FkOjEsbG9jYWxfdmFyaWFibGVzOjEsbG9vcDoxLGxzdHJpcDoxLCJsc3RyaXAhIjoxLG1hcDoxLCJtYXAhIjoxLG1hdGNoOjEsbWF4OjEsIm1lbWJlcj8iOjEsbWVyZ2U6MSwibWVyZ2UhIjoxLG1ldGhvZDoxLCJtZXRob2RfZGVmaW5lZD8iOjEsbWV0aG9kX21pc3Npbmc6MSxtZXRob2RzOjEsbWluOjEsbW9kdWxlX2V2YWw6MSxtb2R1bG86MSxuYW1lOjEsbmVzdGluZzoxLCJuZXciOjEsbmV4dDoxLCJuZXh0ISI6MSwibmlsPyI6MSxuaXRlbXM6MSwibm9uemVybz8iOjEsb2JqZWN0X2lkOjEsb2N0OjEsb3BlbjoxLHBhY2s6MSxwYXJ0aXRpb246MSxwaWQ6MSxwaXBlOjEscG9wOjEscG9wZW46MSxwb3M6MSxwcmVjOjEscHJlY19mOjEscHJlY19pOjEscHJpbnQ6MSxwcmludGY6MSxwcml2YXRlX2NsYXNzX21ldGhvZDoxLHByaXZhdGVfaW5zdGFuY2VfbWV0aG9kczoxLCJwcml2YXRlX21ldGhvZF9kZWZpbmVkPyI6MSxwcml2YXRlX21ldGhvZHM6MSxwcm9jOjEscHJvdGVjdGVkX2luc3RhbmNlX21ldGhvZHM6MSwicHJvdGVjdGVkX21ldGhvZF9kZWZpbmVkPyI6MSxwcm90ZWN0ZWRfbWV0aG9kczoxLHB1YmxpY19jbGFzc19tZXRob2Q6MSxwdWJsaWNfaW5zdGFuY2VfbWV0aG9kczoxLCJwdWJsaWNfbWV0aG9kX2RlZmluZWQ/IjoxLHB1YmxpY19tZXRob2RzOjEscHVzaDoxLHB1dGM6MSxwdXRzOjEscXVvOjEscmFpc2U6MSxyYW5kOjEscmFzc29jOjEscmVhZDoxLHJlYWRfbm9uYmxvY2s6MSxyZWFkY2hhcjoxLHJlYWRsaW5lOjEscmVhZGxpbmVzOjEscmVhZHBhcnRpYWw6MSxyZWhhc2g6MSxyZWplY3Q6MSwicmVqZWN0ISI6MSxyZW1haW5kZXI6MSxyZW9wZW46MSxyZXBsYWNlOjEscmVxdWlyZToxLCJyZXNwb25kX3RvPyI6MSxyZXZlcnNlOjEsInJldmVyc2UhIjoxLHJldmVyc2VfZWFjaDoxLHJld2luZDoxLHJpbmRleDoxLHJqdXN0OjEscm91bmQ6MSxyc3RyaXA6MSwicnN0cmlwISI6MSxzY2FuOjEsc2VlazoxLHNlbGVjdDoxLHNlbmQ6MSxzZXRfdHJhY2VfZnVuYzoxLHNoaWZ0OjEsc2luZ2xldG9uX21ldGhvZF9hZGRlZDoxLHNpbmdsZXRvbl9tZXRob2RzOjEsc2l6ZToxLHNsZWVwOjEsc2xpY2U6MSwic2xpY2UhIjoxLHNvcnQ6MSwic29ydCEiOjEsc29ydF9ieToxLHNwbGl0OjEsc3ByaW50ZjoxLHNxdWVlemU6MSwic3F1ZWV6ZSEiOjEsc3JhbmQ6MSxzdGF0OjEsc3RlcDoxLHN0b3JlOjEsc3RyaXA6MSwic3RyaXAhIjoxLHN1YjoxLCJzdWIhIjoxLHN1Y2M6MSwic3VjYyEiOjEsc3VtOjEsc3VwZXJjbGFzczoxLHN3YXBjYXNlOjEsInN3YXBjYXNlISI6MSxzeW5jOjEsc3lzY2FsbDoxLHN5c29wZW46MSxzeXNyZWFkOjEsc3lzc2VlazoxLHN5c3RlbToxLHN5c3dyaXRlOjEsdGFpbnQ6MSwidGFpbnRlZD8iOjEsdGVsbDoxLHRlc3Q6MSwidGhyb3ciOjEsdGltZXM6MSx0b19hOjEsdG9fYXJ5OjEsdG9fZjoxLHRvX2hhc2g6MSx0b19pOjEsdG9faW50OjEsdG9faW86MSx0b19wcm9jOjEsdG9fczoxLHRvX3N0cjoxLHRvX3N5bToxLHRyOjEsInRyISI6MSx0cl9zOjEsInRyX3MhIjoxLHRyYWNlX3ZhcjoxLHRyYW5zcG9zZToxLHRyYXA6MSx0cnVuY2F0ZToxLCJ0dHk/IjoxLHR5cGU6MSx1bmdldGM6MSx1bmlxOjEsInVuaXEhIjoxLHVucGFjazoxLHVuc2hpZnQ6MSx1bnRhaW50OjEsdW50cmFjZV92YXI6MSx1cGNhc2U6MSwidXBjYXNlISI6MSx1cGRhdGU6MSx1cHRvOjEsInZhbHVlPyI6MSx2YWx1ZXM6MSx2YWx1ZXNfYXQ6MSx3YXJuOjEsd3JpdGU6MSx3cml0ZV9ub25ibG9jazoxLCJ6ZXJvPyI6MSx6aXA6MX19O3ZhciBjPXtjTjoieWFyZG9jdGFnIixiOiJAW0EtWmEtel0rIn07dmFyIGs9W3tjTjoiY29tbWVudCIsYjoiIyIsZToiJCIsYzpbY119LHtjTjoiY29tbWVudCIsYjoiXlxcPWJlZ2luIixlOiJeXFw9ZW5kIixjOltjXSxyOjEwfSx7Y046ImNvbW1lbnQiLGI6Il5fX0VORF9fIixlOiJcXG4kIn1dO3ZhciBkPXtjTjoic3Vic3QiLGI6IiNcXHsiLGU6In0iLGw6YSxrOmZ9O3ZhciBpPVtobGpzLkJFLGRdO3ZhciBiPVt7Y046InN0cmluZyIsYjoiJyIsZToiJyIsYzppLHI6MH0se2NOOiJzdHJpbmciLGI6JyInLGU6JyInLGM6aSxyOjB9LHtjTjoic3RyaW5nIixiOiIlW3F3XT9cXCgiLGU6IlxcKSIsYzppLHI6MTB9LHtjTjoic3RyaW5nIixiOiIlW3F3XT9cXFsiLGU6IlxcXSIsYzppLHI6MTB9LHtjTjoic3RyaW5nIixiOiIlW3F3XT97IixlOiJ9IixjOmkscjoxMH0se2NOOiJzdHJpbmciLGI6IiVbcXddPzwiLGU6Ij4iLGM6aSxyOjEwfSx7Y046InN0cmluZyIsYjoiJVtxd10/LyIsZToiLyIsYzppLHI6MTB9LHtjTjoic3RyaW5nIixiOiIlW3F3XT8lIixlOiIlIixjOmkscjoxMH0se2NOOiJzdHJpbmciLGI6IiVbcXddPy0iLGU6Ii0iLGM6aSxyOjEwfSx7Y046InN0cmluZyIsYjoiJVtxd10/XFx8IixlOiJcXHwiLGM6aSxyOjEwfV07dmFyIGg9e2NOOiJmdW5jdGlvbiIsYjoiXFxiZGVmXFxzKyIsZToiIHwkfDsiLGw6YSxrOmYsYzpbe2NOOiJ0aXRsZSIsYjpqLGw6YSxrOmZ9LHtjTjoicGFyYW1zIixiOiJcXCgiLGU6IlxcKSIsbDphLGs6Zn1dLmNvbmNhdChrKX07dmFyIGc9e2NOOiJpZGVudGlmaWVyIixiOmEsbDphLGs6ZixyOjB9O3ZhciBlPWsuY29uY2F0KGIuY29uY2F0KFt7Y046ImNsYXNzIixiOiJcXGIoY2xhc3N8bW9kdWxlKVxcYiIsZToiJHw7IixrOnsiY2xhc3MiOjEsbW9kdWxlOjF9LGM6W3tjTjoidGl0bGUiLGI6IltBLVphLXpfXVxcdyooOjpcXHcrKSooXFw/fFxcISk/IixyOjB9LHtjTjoiaW5oZXJpdGFuY2UiLGI6IjxcXHMqIixjOlt7Y046InBhcmVudCIsYjoiKCIraGxqcy5JUisiOjopPyIraGxqcy5JUn1dfV0uY29uY2F0KGspfSxoLHtjTjoiY29uc3RhbnQiLGI6Iig6Oik/KFtBLVpdXFx3Kig6Oik/KSsiLHI6MH0se2NOOiJzeW1ib2wiLGI6IjoiLGM6Yi5jb25jYXQoW2ddKSxyOjB9LHtjTjoibnVtYmVyIixiOiIoXFxiMFswLTdfXSspfChcXGIweFswLTlhLWZBLUZfXSspfChcXGJbMS05XVswLTlfXSooXFwuWzAtOV9dKyk/KXxbMF9dXFxiIixyOjB9LHtjTjoibnVtYmVyIixiOiJcXD9cXHcifSx7Y046InZhcmlhYmxlIixiOiIoXFwkXFxXKXwoKFxcJHxcXEBcXEA/KShcXHcrKSkifSxnLHtiOiIoIitobGpzLlJTUisiKVxccyoiLGM6ay5jb25jYXQoW3tjTjoicmVnZXhwIixiOiIvIixlOiIvW2Etel0qIixpOiJcXG4iLGM6W2hsanMuQkVdfV0pLHI6MH1dKSk7ZC5jPWU7aC5jWzFdLmM9ZTtyZXR1cm57ZE06e2w6YSxrOmYsYzplfX19KCk7aGxqcy5MQU5HVUFHRVMuc2NhbGE9ZnVuY3Rpb24oKXt2YXIgYj17Y046ImFubm90YXRpb24iLGI6IkBbQS1aYS16XSsifTt2YXIgYT17Y046InN0cmluZyIsYjondT9yPyIiIicsZTonIiIiJyxyOjEwfTtyZXR1cm57ZE06e2s6e3R5cGU6MSx5aWVsZDoxLGxhenk6MSxvdmVycmlkZToxLGRlZjoxLCJ3aXRoIjoxLHZhbDoxLCJ2YXIiOjEsImZhbHNlIjoxLCJ0cnVlIjoxLHNlYWxlZDoxLCJhYnN0cmFjdCI6MSwicHJpdmF0ZSI6MSx0cmFpdDoxLG9iamVjdDoxLCJudWxsIjoxLCJpZiI6MSwiZm9yIjoxLCJ3aGlsZSI6MSwidGhyb3ciOjEsImZpbmFsbHkiOjEsInByb3RlY3RlZCI6MSwiZXh0ZW5kcyI6MSwiaW1wb3J0IjoxLCJmaW5hbCI6MSwicmV0dXJuIjoxLCJlbHNlIjoxLCJicmVhayI6MSwibmV3IjoxLCJjYXRjaCI6MSwic3VwZXIiOjEsImNsYXNzIjoxLCJjYXNlIjoxLCJwYWNrYWdlIjoxLCJkZWZhdWx0IjoxLCJ0cnkiOjEsInRoaXMiOjEsbWF0Y2g6MSwiY29udGludWUiOjEsInRocm93cyI6MX0sYzpbe2NOOiJqYXZhZG9jIixiOiIvXFwqXFwqIixlOiJcXCovIixjOlt7Y046ImphdmFkb2N0YWciLGI6IkBbQS1aYS16XSsifV0scjoxMH0saGxqcy5DTENNLGhsanMuQ0JMQ0xNLGhsanMuQVNNLGhsanMuUVNNLGEse2NOOiJjbGFzcyIsYjoiKChjYXNlICk/Y2xhc3MgfG9iamVjdCB8dHJhaXQgKSIsZToiKHt8JCkiLGk6IjoiLGs6eyJjYXNlIjoxLCJjbGFzcyI6MSx0cmFpdDoxLG9iamVjdDoxfSxjOlt7YldLOnRydWUsazp7ImV4dGVuZHMiOjEsIndpdGgiOjF9LHI6MTB9LHtjTjoidGl0bGUiLGI6aGxqcy5VSVJ9LHtjTjoicGFyYW1zIixiOiJcXCgiLGU6IlxcKSIsYzpbaGxqcy5BU00saGxqcy5RU00sYSxiXX1dfSxobGpzLkNOTSxiXX19fSgpO2hsanMuTEFOR1VBR0VTLnNxbD17Y0k6dHJ1ZSxkTTp7aToiW15cXHNdIixjOlt7Y046Im9wZXJhdG9yIixiOiIoYmVnaW58c3RhcnR8Y29tbWl0fHJvbGxiYWNrfHNhdmVwb2ludHxsb2NrfGFsdGVyfGNyZWF0ZXxkcm9wfHJlbmFtZXxjYWxsfGRlbGV0ZXxkb3xoYW5kbGVyfGluc2VydHxsb2FkfHJlcGxhY2V8c2VsZWN0fHRydW5jYXRlfHVwZGF0ZXxzZXR8c2hvd3xwcmFnbWF8Z3JhbnQpXFxiIixlOiI7fCIraGxqcy5FUixrOntrZXl3b3JkOnthbGw6MSxwYXJ0aWFsOjEsZ2xvYmFsOjEsbW9udGg6MSxjdXJyZW50X3RpbWVzdGFtcDoxLHVzaW5nOjEsZ286MSxyZXZva2U6MSxzbWFsbGludDoxLGluZGljYXRvcjoxLCJlbmQtZXhlYyI6MSxkaXNjb25uZWN0OjEsem9uZToxLCJ3aXRoIjoxLGNoYXJhY3RlcjoxLGFzc2VydGlvbjoxLHRvOjEsYWRkOjEsY3VycmVudF91c2VyOjEsdXNhZ2U6MSxpbnB1dDoxLGxvY2FsOjEsYWx0ZXI6MSxtYXRjaDoxLGNvbGxhdGU6MSxyZWFsOjEsdGhlbjoxLHJvbGxiYWNrOjEsZ2V0OjEscmVhZDoxLHRpbWVzdGFtcDoxLHNlc3Npb25fdXNlcjoxLG5vdDoxLGludGVnZXI6MSxiaXQ6MSx1bmlxdWU6MSxkYXk6MSxtaW51dGU6MSxkZXNjOjEsaW5zZXJ0OjEsZXhlY3V0ZToxLGxpa2U6MSxpbGlrZToyLGxldmVsOjEsZGVjaW1hbDoxLGRyb3A6MSwiY29udGludWUiOjEsaXNvbGF0aW9uOjEsZm91bmQ6MSx3aGVyZToxLGNvbnN0cmFpbnRzOjEsZG9tYWluOjEscmlnaHQ6MSxuYXRpb25hbDoxLHNvbWU6MSxtb2R1bGU6MSx0cmFuc2FjdGlvbjoxLHJlbGF0aXZlOjEsc2Vjb25kOjEsY29ubmVjdDoxLGVzY2FwZToxLGNsb3NlOjEsc3lzdGVtX3VzZXI6MSwiZm9yIjoxLGRlZmVycmVkOjEsc2VjdGlvbjoxLGNhc3Q6MSxjdXJyZW50OjEsc3Fsc3RhdGU6MSxhbGxvY2F0ZToxLGludGVyc2VjdDoxLGRlYWxsb2NhdGU6MSxudW1lcmljOjEsInB1YmxpYyI6MSxwcmVzZXJ2ZToxLGZ1bGw6MSwiZ290byI6MSxpbml0aWFsbHk6MSxhc2M6MSxubzoxLGtleToxLG91dHB1dDoxLGNvbGxhdGlvbjoxLGdyb3VwOjEsYnk6MSx1bmlvbjoxLHNlc3Npb246MSxib3RoOjEsbGFzdDoxLGxhbmd1YWdlOjEsY29uc3RyYWludDoxLGNvbHVtbjoxLG9mOjEsc3BhY2U6MSxmb3JlaWduOjEsZGVmZXJyYWJsZToxLHByaW9yOjEsY29ubmVjdGlvbjoxLHVua25vd246MSxhY3Rpb246MSxjb21taXQ6MSx2aWV3OjEsb3I6MSxmaXJzdDoxLGludG86MSwiZmxvYXQiOjEseWVhcjoxLHByaW1hcnk6MSxjYXNjYWRlZDoxLGV4Y2VwdDoxLHJlc3RyaWN0OjEsc2V0OjEscmVmZXJlbmNlczoxLG5hbWVzOjEsdGFibGU6MSxvdXRlcjoxLG9wZW46MSxzZWxlY3Q6MSxzaXplOjEsYXJlOjEscm93czoxLGZyb206MSxwcmVwYXJlOjEsZGlzdGluY3Q6MSxsZWFkaW5nOjEsY3JlYXRlOjEsb25seToxLG5leHQ6MSxpbm5lcjoxLGF1dGhvcml6YXRpb246MSxzY2hlbWE6MSxjb3JyZXNwb25kaW5nOjEsb3B0aW9uOjEsZGVjbGFyZToxLHByZWNpc2lvbjoxLGltbWVkaWF0ZToxLCJlbHNlIjoxLHRpbWV6b25lX21pbnV0ZToxLGV4dGVybmFsOjEsdmFyeWluZzoxLHRyYW5zbGF0aW9uOjEsInRydWUiOjEsImNhc2UiOjEsZXhjZXB0aW9uOjEsam9pbjoxLGhvdXI6MSwiZGVmYXVsdCI6MSwiZG91YmxlIjoxLHNjcm9sbDoxLHZhbHVlOjEsY3Vyc29yOjEsZGVzY3JpcHRvcjoxLHZhbHVlczoxLGRlYzoxLGZldGNoOjEscHJvY2VkdXJlOjEsImRlbGV0ZSI6MSxhbmQ6MSwiZmFsc2UiOjEsImludCI6MSxpczoxLGRlc2NyaWJlOjEsImNoYXIiOjEsYXM6MSxhdDoxLCJpbiI6MSx2YXJjaGFyOjEsIm51bGwiOjEsdHJhaWxpbmc6MSxhbnk6MSxhYnNvbHV0ZToxLGN1cnJlbnRfdGltZToxLGVuZDoxLGdyYW50OjEscHJpdmlsZWdlczoxLHdoZW46MSxjcm9zczoxLGNoZWNrOjEsd3JpdGU6MSxjdXJyZW50X2RhdGU6MSxwYWQ6MSxiZWdpbjoxLHRlbXBvcmFyeToxLGV4ZWM6MSx0aW1lOjEsdXBkYXRlOjEsY2F0YWxvZzoxLHVzZXI6MSxzcWw6MSxkYXRlOjEsb246MSxpZGVudGl0eToxLHRpbWV6b25lX2hvdXI6MSxuYXR1cmFsOjEsd2hlbmV2ZXI6MSxpbnRlcnZhbDoxLHdvcms6MSxvcmRlcjoxLGNhc2NhZGU6MSxkaWFnbm9zdGljczoxLG5jaGFyOjEsaGF2aW5nOjEsbGVmdDoxLGNhbGw6MSwiZG8iOjEsaGFuZGxlcjoxLGxvYWQ6MSxyZXBsYWNlOjEsdHJ1bmNhdGU6MSxzdGFydDoxLGxvY2s6MSxzaG93OjEscHJhZ21hOjF9LGFnZ3JlZ2F0ZTp7Y291bnQ6MSxzdW06MSxtaW46MSxtYXg6MSxhdmc6MX19LGM6W3tjTjoic3RyaW5nIixiOiInIixlOiInIixjOltobGpzLkJFLHtiOiInJyJ9XSxyOjB9LHtjTjoic3RyaW5nIixiOiciJyxlOiciJyxjOltobGpzLkJFLHtiOiciIid9XSxyOjB9LHtjTjoic3RyaW5nIixiOiJgIixlOiJgIixjOltobGpzLkJFXX0saGxqcy5DTk1dfSxobGpzLkNCTENMTSx7Y046ImNvbW1lbnQiLGI6Ii0tIixlOiIkIn1dfX07aGxqcy5MQU5HVUFHRVMuc3Rhbj17ZE06e2M6W2hsanMuSENNLGhsanMuQ0xDTSxobGpzLlFTTSxobGpzLkNOTSx7Y046Im9wZXJhdG9yIixiOiIoPzo8LXx+fFxcfFxcfHwmJnw9PXwhPXw8PT98Pj0/fFxcK3wtfFxcLj8vfFxcXFx8XFxefFxcXnwhfCd8JXw6fCx8O3w9KVxcYiIsZTpobGpzLklNTUVESUFURV9SRSxyOjEwfSx7Y046InBhcmVuIixiOiJbWyh7XFxdKX1dIixlOmhsanMuSU1NRURJQVRFX1JFLHI6MH0se2NOOiJmdW5jdGlvbiIsYjoiKD86UGhpfFBoaV9hcHByb3h8YWJzfGFjb3N8YWNvc2h8YXBwZW5kX2NvbHxhcHBlbmRfcm93fGFzaW58YXNpbmh8YXRhbnxhdGFuMnxhdGFuaHxiZXJub3VsbGlfY2NkZl9sb2d8YmVybm91bGxpX2NkZnxiZXJub3VsbGlfY2RmX2xvZ3xiZXJub3VsbGlfbG9nfGJlcm5vdWxsaV9sb2dpdF9sb2d8YmVybm91bGxpX3JuZ3xiZXNzZWxfZmlyc3Rfa2luZHxiZXNzZWxfc2Vjb25kX2tpbmR8YmV0YV9iaW5vbWlhbF9jY2RmX2xvZ3xiZXRhX2Jpbm9taWFsX2NkZnxiZXRhX2Jpbm9taWFsX2NkZl9sb2d8YmV0YV9iaW5vbWlhbF9sb2d8YmV0YV9iaW5vbWlhbF9ybmd8YmV0YV9jY2RmX2xvZ3xiZXRhX2NkZnxiZXRhX2NkZl9sb2d8YmV0YV9sb2d8YmV0YV9ybmd8YmluYXJ5X2xvZ19sb3NzfGJpbm9taWFsX2NjZGZfbG9nfGJpbm9taWFsX2NkZnxiaW5vbWlhbF9jZGZfbG9nfGJpbm9taWFsX2NvZWZmaWNpZW50X2xvZ3xiaW5vbWlhbF9sb2d8Ymlub21pYWxfbG9naXRfbG9nfGJpbm9taWFsX3JuZ3xibG9ja3xjYXRlZ29yaWNhbF9sb2d8Y2F0ZWdvcmljYWxfbG9naXRfbG9nfGNhdGVnb3JpY2FsX3JuZ3xjYXVjaHlfY2NkZl9sb2d8Y2F1Y2h5X2NkZnxjYXVjaHlfY2RmX2xvZ3xjYXVjaHlfbG9nfGNhdWNoeV9ybmd8Y2JydHxjZWlsfGNoaV9zcXVhcmVfY2NkZl9sb2d8Y2hpX3NxdWFyZV9jZGZ8Y2hpX3NxdWFyZV9jZGZfbG9nfGNoaV9zcXVhcmVfbG9nfGNoaV9zcXVhcmVfcm5nfGNob2xlc2t5X2RlY29tcG9zZXxjb2x8Y29sc3xjb2x1bW5zX2RvdF9wcm9kdWN0fGNvbHVtbnNfZG90X3NlbGZ8Y29zfGNvc2h8Y3Jvc3Nwcm9kfGNzcl9leHRyYWN0X3V8Y3NyX2V4dHJhY3Rfdnxjc3JfZXh0cmFjdF93fGNzcl9tYXRyaXhfdGltZXNfdmVjdG9yfGNzcl90b19kZW5zZV9tYXRyaXh8Y3VtdWxhdGl2ZV9zdW18ZGV0ZXJtaW5hbnR8ZGlhZ19tYXRyaXh8ZGlhZ19wb3N0X211bHRpcGx5fGRpYWdfcHJlX211bHRpcGx5fGRpYWdvbmFsfGRpZ2FtbWF8ZGltc3xkaXJpY2hsZXRfbG9nfGRpcmljaGxldF9ybmd8ZGlzdGFuY2V8ZG90X3Byb2R1Y3R8ZG90X3NlbGZ8ZG91YmxlX2V4cG9uZW50aWFsX2NjZGZfbG9nfGRvdWJsZV9leHBvbmVudGlhbF9jZGZ8ZG91YmxlX2V4cG9uZW50aWFsX2NkZl9sb2d8ZG91YmxlX2V4cG9uZW50aWFsX2xvZ3xkb3VibGVfZXhwb25lbnRpYWxfcm5nfGV8ZWlnZW52YWx1ZXNfc3ltfGVpZ2VudmVjdG9yc19zeW18ZXJmfGVyZmN8ZXhwfGV4cDJ8ZXhwX21vZF9ub3JtYWxfY2NkZl9sb2d8ZXhwX21vZF9ub3JtYWxfY2RmfGV4cF9tb2Rfbm9ybWFsX2NkZl9sb2d8ZXhwX21vZF9ub3JtYWxfbG9nfGV4cF9tb2Rfbm9ybWFsX3JuZ3xleHBtMXxleHBvbmVudGlhbF9jY2RmX2xvZ3xleHBvbmVudGlhbF9jZGZ8ZXhwb25lbnRpYWxfY2RmX2xvZ3xleHBvbmVudGlhbF9sb2d8ZXhwb25lbnRpYWxfcm5nfGZhYnN8ZmFsbGluZ19mYWN0b3JpYWx8ZmRpbXxmbG9vcnxmbWF8Zm1heHxmbWlufGZtb2R8ZnJlY2hldF9jY2RmX2xvZ3xmcmVjaGV0X2NkZnxmcmVjaGV0X2NkZl9sb2d8ZnJlY2hldF9sb2d8ZnJlY2hldF9ybmd8Z2FtbWFfY2NkZl9sb2d8Z2FtbWFfY2RmfGdhbW1hX2NkZl9sb2d8Z2FtbWFfbG9nfGdhbW1hX3B8Z2FtbWFfcXxnYW1tYV9ybmd8Z2F1c3NpYW5fZGxtX29ic19sb2d8Z2V0X2xwfGd1bWJlbF9jY2RmX2xvZ3xndW1iZWxfY2RmfGd1bWJlbF9jZGZfbG9nfGd1bWJlbF9sb2d8Z3VtYmVsX3JuZ3xoZWFkfGh5cGVyZ2VvbWV0cmljX2xvZ3xoeXBlcmdlb21ldHJpY19ybmd8aHlwb3R8aWZfZWxzZXxpbnRfc3RlcHxpbnZ8aW52X2NoaV9zcXVhcmVfY2NkZl9sb2d8aW52X2NoaV9zcXVhcmVfY2RmfGludl9jaGlfc3F1YXJlX2NkZl9sb2d8aW52X2NoaV9zcXVhcmVfbG9nfGludl9jaGlfc3F1YXJlX3JuZ3xpbnZfY2xvZ2xvZ3xpbnZfZ2FtbWFfY2NkZl9sb2d8aW52X2dhbW1hX2NkZnxpbnZfZ2FtbWFfY2RmX2xvZ3xpbnZfZ2FtbWFfbG9nfGludl9nYW1tYV9ybmd8aW52X2xvZ2l0fGludl9waGl8aW52X3NxcnR8aW52X3NxdWFyZXxpbnZfd2lzaGFydF9sb2d8aW52X3dpc2hhcnRfcm5nfGludmVyc2V8aW52ZXJzZV9zcGR8aXNfaW5mfGlzX25hbnxsYmV0YXxsZ2FtbWF8bGtqX2NvcnJfY2hvbGVza3lfbG9nfGxral9jb3JyX2Nob2xlc2t5X3JuZ3xsa2pfY29ycl9sb2d8bGtqX2NvcnJfcm5nfGxtZ2FtbWF8bG9nfGxvZzEwfGxvZzFtfGxvZzFtX2V4cHxsb2cxbV9pbnZfbG9naXR8bG9nMXB8bG9nMXBfZXhwfGxvZzJ8bG9nX2RldGVybWluYW50fGxvZ19kaWZmX2V4cHxsb2dfZmFsbGluZ19mYWN0b3JpYWx8bG9nX2ludl9sb2dpdHxsb2dfbWl4fGxvZ19yaXNpbmdfZmFjdG9yaWFsfGxvZ19zb2Z0bWF4fGxvZ19zdW1fZXhwfGxvZ2lzdGljX2NjZGZfbG9nfGxvZ2lzdGljX2NkZnxsb2dpc3RpY19jZGZfbG9nfGxvZ2lzdGljX2xvZ3xsb2dpc3RpY19ybmd8bG9naXR8bG9nbm9ybWFsX2NjZGZfbG9nfGxvZ25vcm1hbF9jZGZ8bG9nbm9ybWFsX2NkZl9sb2d8bG9nbm9ybWFsX2xvZ3xsb2dub3JtYWxfcm5nfG1hY2hpbmVfcHJlY2lzaW9ufG1heHxtZGl2aWRlX2xlZnRfdHJpX2xvd3xtZGl2aWRlX3JpZ2h0X3RyaV9sb3d8bWVhbnxtaW58bW9kaWZpZWRfYmVzc2VsX2ZpcnN0X2tpbmR8bW9kaWZpZWRfYmVzc2VsX3NlY29uZF9raW5kfG11bHRpX2dwX2Nob2xlc2t5X2xvZ3xtdWx0aV9ncF9sb2d8bXVsdGlfbm9ybWFsX2Nob2xlc2t5X2xvZ3xtdWx0aV9ub3JtYWxfY2hvbGVza3lfcm5nfG11bHRpX25vcm1hbF9sb2d8bXVsdGlfbm9ybWFsX3ByZWNfbG9nfG11bHRpX25vcm1hbF9ybmd8bXVsdGlfc3R1ZGVudF90X2xvZ3xtdWx0aV9zdHVkZW50X3Rfcm5nfG11bHRpbm9taWFsX2xvZ3xtdWx0aW5vbWlhbF9ybmd8bXVsdGlwbHlfbG9nfG11bHRpcGx5X2xvd2VyX3RyaV9zZWxmX3RyYW5zcG9zZXxuZWdfYmlub21pYWxfMl9jY2RmX2xvZ3xuZWdfYmlub21pYWxfMl9jZGZ8bmVnX2Jpbm9taWFsXzJfY2RmX2xvZ3xuZWdfYmlub21pYWxfMl9sb2d8bmVnX2Jpbm9taWFsXzJfbG9nX2xvZ3xuZWdfYmlub21pYWxfMl9sb2dfcm5nfG5lZ19iaW5vbWlhbF8yX3JuZ3xuZWdfYmlub21pYWxfY2NkZl9sb2d8bmVnX2Jpbm9taWFsX2NkZnxuZWdfYmlub21pYWxfY2RmX2xvZ3xuZWdfYmlub21pYWxfbG9nfG5lZ19iaW5vbWlhbF9ybmd8bmVnYXRpdmVfaW5maW5pdHl8bm9ybWFsX2NjZGZfbG9nfG5vcm1hbF9jZGZ8bm9ybWFsX2NkZl9sb2d8bm9ybWFsX2xvZ3xub3JtYWxfcm5nfG5vdF9hX251bWJlcnxudW1fZWxlbWVudHN8b3JkZXJlZF9sb2dpc3RpY19sb2d8b3JkZXJlZF9sb2dpc3RpY19ybmd8b3dlbnNfdHxwYXJldG9fY2NkZl9sb2d8cGFyZXRvX2NkZnxwYXJldG9fY2RmX2xvZ3xwYXJldG9fbG9nfHBhcmV0b19ybmd8cGFyZXRvX3R5cGVfMl9jY2RmX2xvZ3xwYXJldG9fdHlwZV8yX2NkZnxwYXJldG9fdHlwZV8yX2NkZl9sb2d8cGFyZXRvX3R5cGVfMl9sb2d8cGFyZXRvX3R5cGVfMl9ybmd8cGl8cG9pc3Nvbl9jY2RmX2xvZ3xwb2lzc29uX2NkZnxwb2lzc29uX2NkZl9sb2d8cG9pc3Nvbl9sb2d8cG9pc3Nvbl9sb2dfbG9nfHBvaXNzb25fbG9nX3JuZ3xwb2lzc29uX3JuZ3xwb3NpdGl2ZV9pbmZpbml0eXxwb3d8cHJvZHxxcl9RfHFyX1J8cXVhZF9mb3JtfHF1YWRfZm9ybV9kaWFnfHF1YWRfZm9ybV9zeW18cmFua3xyYXlsZWlnaF9jY2RmX2xvZ3xyYXlsZWlnaF9jZGZ8cmF5bGVpZ2hfY2RmX2xvZ3xyYXlsZWlnaF9sb2d8cmF5bGVpZ2hfcm5nfHJlcF9hcnJheXxyZXBfbWF0cml4fHJlcF9yb3dfdmVjdG9yfHJlcF92ZWN0b3J8cmlzaW5nX2ZhY3RvcmlhbHxyb3VuZHxyb3d8cm93c3xyb3dzX2RvdF9wcm9kdWN0fHJvd3NfZG90X3NlbGZ8c2NhbGVkX2ludl9jaGlfc3F1YXJlX2NjZGZfbG9nfHNjYWxlZF9pbnZfY2hpX3NxdWFyZV9jZGZ8c2NhbGVkX2ludl9jaGlfc3F1YXJlX2NkZl9sb2d8c2NhbGVkX2ludl9jaGlfc3F1YXJlX2xvZ3xzY2FsZWRfaW52X2NoaV9zcXVhcmVfcm5nfHNkfHNlZ21lbnR8c2lufHNpbmd1bGFyX3ZhbHVlc3xzaW5ofHNpemV8c2tld19ub3JtYWxfY2NkZl9sb2d8c2tld19ub3JtYWxfY2RmfHNrZXdfbm9ybWFsX2NkZl9sb2d8c2tld19ub3JtYWxfbG9nfHNrZXdfbm9ybWFsX3JuZ3xzb2Z0bWF4fHNvcnRfYXNjfHNvcnRfZGVzY3xzb3J0X2luZGljZXNfYXNjfHNvcnRfaW5kaWNlc19kZXNjfHNxcnR8c3FydDJ8c3F1YXJlfHNxdWFyZWRfZGlzdGFuY2V8c3RlcHxzdHVkZW50X3RfY2NkZl9sb2d8c3R1ZGVudF90X2NkZnxzdHVkZW50X3RfY2RmX2xvZ3xzdHVkZW50X3RfbG9nfHN0dWRlbnRfdF9ybmd8c3ViX2NvbHxzdWJfcm93fHN1bXx0YWlsfHRhbnx0YW5ofHRjcm9zc3Byb2R8dGdhbW1hfHRvX2FycmF5XzFkfHRvX2FycmF5XzJkfHRvX21hdHJpeHx0b19yb3dfdmVjdG9yfHRvX3ZlY3Rvcnx0cmFjZXx0cmFjZV9nZW5fcXVhZF9mb3JtfHRyYWNlX3F1YWRfZm9ybXx0cmlnYW1tYXx0cnVuY3x1bmlmb3JtX2NjZGZfbG9nfHVuaWZvcm1fY2RmfHVuaWZvcm1fY2RmX2xvZ3x1bmlmb3JtX2xvZ3x1bmlmb3JtX3JuZ3x2YXJpYW5jZXx2b25fbWlzZXNfbG9nfHZvbl9taXNlc19ybmd8d2VpYnVsbF9jY2RmX2xvZ3x3ZWlidWxsX2NkZnx3ZWlidWxsX2NkZl9sb2d8d2VpYnVsbF9sb2d8d2VpYnVsbF9ybmd8d2llbmVyX2xvZ3x3aXNoYXJ0X2xvZ3x3aXNoYXJ0X3JuZylcXGIiLGU6aGxqcy5JTU1FRElBVEVfUkUscjoxMH0se2NOOiJmdW5jdGlvbiIsYjoiKD86YmVybm91bGxpfGJlcm5vdWxsaV9sb2dpdHxiZXRhfGJldGFfYmlub21pYWx8Ymlub21pYWx8Ymlub21pYWxfbG9naXR8Y2F0ZWdvcmljYWx8Y2F0ZWdvcmljYWxfbG9naXR8Y2F1Y2h5fGNoaV9zcXVhcmV8ZGlyaWNobGV0fGRvdWJsZV9leHBvbmVudGlhbHxleHBfbW9kX25vcm1hbHxleHBvbmVudGlhbHxmcmVjaGV0fGdhbW1hfGdhdXNzaWFuX2RsbV9vYnN8Z3VtYmVsfGh5cGVyZ2VvbWV0cmljfGludl9jaGlfc3F1YXJlfGludl9nYW1tYXxpbnZfd2lzaGFydHxsa2pfY29ycnxsa2pfY29ycl9jaG9sZXNreXxsb2dpc3RpY3xsb2dub3JtYWx8bXVsdGlfZ3B8bXVsdGlfZ3BfY2hvbGVza3l8bXVsdGlfbm9ybWFsfG11bHRpX25vcm1hbF9jaG9sZXNreXxtdWx0aV9ub3JtYWxfcHJlY3xtdWx0aV9zdHVkZW50X3R8bXVsdGlub21pYWx8bmVnX2Jpbm9taWFsfG5lZ19iaW5vbWlhbF8yfG5lZ19iaW5vbWlhbF8yX2xvZ3xub3JtYWx8b3JkZXJlZF9sb2dpc3RpY3xwYXJldG98cGFyZXRvX3R5cGVfMnxwb2lzc29ufHBvaXNzb25fbG9nfHJheWxlaWdofHNjYWxlZF9pbnZfY2hpX3NxdWFyZXxza2V3X25vcm1hbHxzdHVkZW50X3R8dW5pZm9ybXx2b25fbWlzZXN8d2VpYnVsbHx3aWVuZXJ8d2lzaGFydClcXGIiLGU6aGxqcy5JTU1FRElBVEVfUkUscjoxMH0se2NOOiJrZXl3b3JkIixiOiIoPzpmb3J8aW58d2hpbGV8aWZ8dGhlbnxlbHNlfHJldHVybnxsb3dlcnx1cHBlcnxwcmludHxpbmNyZW1lbnRfbG9nX3Byb2J8aW50ZWdyYXRlX29kZXxyZWplY3QpXFxiIixlOmhsanMuSU1NRURJQVRFX1JFLHI6MTB9LHtjTjoia2V5d29yZCIsYjoiKD86aW50fHJlYWx8dmVjdG9yfHNpbXBsZXh8dW5pdF92ZWN0b3J8b3JkZXJlZHxwb3NpdGl2ZV9vcmRlcmVkfHJvd192ZWN0b3J8bWF0cml4fGNob2xlc2t5X2ZhY3Rvcl9jb3Z8Y2hvbGVza3lfZmFjdG9yX2NvcnJ8Y29ycl9tYXRyaXh8Y292X21hdHJpeHx2b2lkKVxcYiIsZTpobGpzLklNTUVESUFURV9SRSxyOjV9LHtjTjoia2V5d29yZCIsYjoiKD86ZnVuY3Rpb25zfGRhdGF8dHJhbnNmb3JtZWRcXHMrZGF0YXxwYXJhbWV0ZXJzfHRyYW5zZm9ybWVkXFxzK3BhcmFtZXRlcnN8bW9kZWx8Z2VuZXJhdGVkXFxzK3F1YW50aXRpZXMpXFxiIixlOmhsanMuSU1NRURJQVRFX1JFLHI6NX1dfX07aGxqcy5MQU5HVUFHRVMueG1sPWZ1bmN0aW9uKCl7dmFyIGI9IltBLVphLXowLTlcXC5fOi1dKyI7dmFyIGE9e2VXOnRydWUsYzpbe2NOOiJhdHRyaWJ1dGUiLGI6YixyOjB9LHtiOic9IicsckI6dHJ1ZSxlOiciJyxjOlt7Y046InZhbHVlIixiOiciJyxlVzp0cnVlfV19LHtiOiI9JyIsckI6dHJ1ZSxlOiInIixjOlt7Y046InZhbHVlIixiOiInIixlVzp0cnVlfV19LHtiOiI9IixjOlt7Y046InZhbHVlIixiOiJbXlxccy8+XSsifV19XX07cmV0dXJue2NJOnRydWUsZE06e2M6W3tjTjoicGkiLGI6IjxcXD8iLGU6IlxcPz4iLHI6MTB9LHtjTjoiZG9jdHlwZSIsYjoiPCFET0NUWVBFIixlOiI+IixyOjEwLGM6W3tiOiJcXFsiLGU6IlxcXSJ9XX0se2NOOiJjb21tZW50IixiOiI8IS0tIixlOiItLT4iLHI6MTB9LHtjTjoiY2RhdGEiLGI6IjxcXCFcXFtDREFUQVxcWyIsZToiXFxdXFxdPiIscjoxMH0se2NOOiJ0YWciLGI6IjxzdHlsZSg/PVxcc3w+fCQpIixlOiI+IixrOnt0aXRsZTp7c3R5bGU6MX19LGM6W2FdLHN0YXJ0czp7Y046ImNzcyIsZToiPC9zdHlsZT4iLHJFOnRydWUsc0w6ImNzcyJ9fSx7Y046InRhZyIsYjoiPHNjcmlwdCg/PVxcc3w+fCQpIixlOiI+IixrOnt0aXRsZTp7c2NyaXB0OjF9fSxjOlthXSxzdGFydHM6e2NOOiJqYXZhc2NyaXB0IixlOiI8XC9zY3JpcHQ+IixyRTp0cnVlLHNMOiJqYXZhc2NyaXB0In19LHtjTjoidmJzY3JpcHQiLGI6IjwlIixlOiIlPiIsc0w6InZic2NyaXB0In0se2NOOiJ0YWciLGI6IjwvPyIsZToiLz8+IixjOlt7Y046InRpdGxlIixiOiJbXiAvPl0rIn0sYV19XX19fSgpOwpobGpzLmluaXRIaWdobGlnaHRpbmdPbkxvYWQoKTsKCg=="></script>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>




<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%200%20auto%3B%0Amax%2Dwidth%3A%20800px%3B%0Afloat%3A%20center%3B%0Amargin%2Dleft%3A%20auto%3B%0Amargin%2Dright%3A%20auto%3B%0Aoverflow%3A%20visible%3B%0A%7D%0Abody%20%23header%20%7B%0Aclear%3A%20both%3B%0Amargin%2Dbottom%3A%208px%3B%0Aborder%2Dbottom%3A%202px%20solid%20%23999%3B%0Afont%2Dsize%3A%2020px%3B%0Apadding%3A%202px%2010px%202px%2025px%3B%0A%7D%0Abody%20%23content%20%7B%0Abackground%2Dcolor%3A%20white%3B%0Aclear%3A%20both%3B%0Afloat%3A%20left%3B%0Aoverflow%3A%20visible%3B%0Apadding%3A%2010px%3B%0Aborder%3A%201px%20solid%20%23BBBBBB%3B%0Aborder%2Dradius%3A%205px%3B%0Awidth%3A%20780px%3B%0A%7D%0Abody%20%23footer%20%7B%0Abackground%2Dcolor%3A%20%2399BBDD%3B%0Aclear%3A%20both%3B%0Afloat%3A%20left%3B%0Amargin%3A%208px%200%3B%0Aborder%3A%201px%20solid%20%236688AA%3B%0Aborder%2Dradius%3A%205px%3B%0Apadding%3A%200%2010px%3B%0Awidth%3A%20780px%3B%0A%7D%0Abody%20%2Eclear%20%7B%0Aclear%3A%20both%3B%0Aborder%2Dwidth%3A%200%3B%0Amargin%3A%200%3B%0Avisibility%3A%20hidden%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%2Dleft%3A%2025px%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dspacing%3A%200px%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcolor%3A%20gray%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Abackground%2Dcolor%3A%20white%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Abackground%2Dcolor%3A%20white%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%202px%205px%3B%0A%7D%0Ap%20%7B%0Amargin%2Dleft%3A%2015px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%2013px%3B%0Apadding%2Dbottom%3A%201px%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Acolor%3A%20%23000%3B%0Apadding%3A%200px%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Acolor%3A%20%23333%3B%0Aborder%3A%201px%20solid%20%23ddd%3B%0Aborder%2Dradius%3A%203px%3B%0Abackground%2Dcolor%3A%20%23f8f8f8%3B%0Afont%2Dsize%3A%2080%25%3B%0Apadding%3A%200px%202px%3B%0A%7D%0A%0Apre%20%7B%0Afont%2Dsize%3A%2012px%3B%0Aline%2Dheight%3A%2016px%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%2Er%20%7B%0Abackground%2Dcolor%3A%20%23F3F5F7%3B%0Apadding%3A%204px%2010px%3B%0Aborder%3A%201px%20solid%20%23AEBDCC%3B%0Aborder%2Dradius%3A%205px%3B%0Amargin%3A%205px%205px%2010px%2020px%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Abox%2Dshadow%3A%202px%202px%2012px%20%2D5px%20%23999999%3B%0Amargin%3A%200%205px%3B%0A%7D%0Abody%20%7B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2015px%3B%0Aline%2Dheight%3A%2022px%3B%0A%7D%0Abody%20%23header%20%7B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23ccc%3B%0Awidth%3A%2085%25%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%2022px%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23ccc%3B%0Awidth%3A%2075%25%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%2018px%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Awidth%3A%2060%25%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%2016px%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Awidth%3A%2060%25%3B%0Amargin%2Dleft%3A%2015px%3B%0Afont%2Dsize%3A%2016px%3B%0A%7D%0Ah4%2Eauthor%20%7B%0Aborder%2Dbottom%3A%20none%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Apre%20%2Eoperator%2C%0Apre%20%2Eparen%20%7B%0Acolor%3A%20%23888%3B%0A%7D%0Apre%20%2Eliteral%20%7B%0Acolor%3A%20%23990073%3B%0A%7D%0Apre%20%2Enumber%20%7B%0Acolor%3A%20%230080C0%3B%0A%7D%0Apre%20%2Ecomment%20%7B%0Acolor%3A%20%23008000%3B%0Afont%2Dstyle%3A%20italic%0A%7D%0Apre%20%2Ekeyword%20%7B%0Acolor%3A%20%23900%3B%0Afont%2Dweight%3A%20bold%0A%7D%0Apre%20%2Eidentifier%20%7B%0Acolor%3A%20%23000%3B%0A%7D%0Apre%20%2Estring%20%7B%0Acolor%3A%20%23b44%3B%0A%7D%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">R6 and Reference class performance tests</h1>


<div id="TOC">
<ul>
<li><a href="#class-definitions">Class definitions</a><ul>
<li><a href="#r-reference-class">R reference class</a></li>
<li><a href="#r6-class">R6 class</a></li>
<li><a href="#r6-class-without-class-attribute">R6 class, without class attribute</a></li>
<li><a href="#r6-class-non-portable">R6 class, non-portable</a></li>
<li><a href="#r6-class-with-cloneablefalse">R6 class, with <code>cloneable=FALSE</code></a></li>
<li><a href="#r6-class-without-class-attribute-non-portable-and-non-cloneable">R6 class, without class attribute, non-portable, and non-cloneable</a></li>
<li><a href="#r6-class-with-public-and-private-members">R6 class, with public and private members</a></li>
<li><a href="#r6-class-with-public-and-private-no-class-attribute-non-portable-and-non-cloneable">R6 class, with public and private, no class attribute, non-portable, and non-cloneable</a></li>
<li><a href="#environment-created-by-a-function-call-with-class-attribute">Environment created by a function call, with class attribute</a></li>
<li><a href="#environment-created-by-a-function-call-without-class-attribute">Environment created by a function call, without class attribute</a></li>
</ul></li>
<li><a href="#tests">Tests</a><ul>
<li><a href="#memory-footprint">Memory footprint</a></li>
<li><a href="#object-instantiation-speed">Object instantiation speed</a></li>
<li><a href="#field-access-speed">Field access speed</a></li>
<li><a href="#field-setting-speed">Field setting speed</a></li>
<li><a href="#speed-of-method-call-that-accesses-a-field">Speed of method call that accesses a field</a></li>
<li><a href="#assignment-using-selfx---vs.-x--">Assignment using <code>self$x &lt;-</code> vs. <code>x &lt;&lt;-</code></a></li>
<li><a href="#overhead-from-using-on-objects-with-a-class-attribute">Overhead from using <code>$</code> on objects with a class attribute</a></li>
<li><a href="#lists-vs.environments-and-vs.">Lists vs.environments, and <code>$</code> vs. <code>[[</code></a></li>
</ul></li>
<li><a href="#wrap-up">Wrap-up</a></li>
<li><a href="#appendix">Appendix</a><ul>
<li><a href="#functions-for-calculating-object-sizes">Functions for calculating object sizes</a></li>
<li><a href="#system-information">System information</a></li>
</ul></li>
</ul>
</div>

<p>This document compares the memory costs and speed of Rs reference classes against R6 classes and simple environments. For must uses, R6 and reference classes have comparable features, but as well see, R6 classes are faster and lighter weight.</p>
<p>This document tests reference classes against R6 classes (in many variations), as well as against very simple reference objects: environments created by functino calls.</p>
<hr />
<p>First well load some packages which will be used below:</p>
<pre class="r"><code>library(microbenchmark)
options(microbenchmark.unit = &quot;us&quot;)
library(pryr)  # For object_size function
library(R6)</code></pre>
<hr />
<div id="class-definitions" class="section level1">
<h1>Class definitions</h1>
<p>Well start by defining a number of classes or class-like entities, using reference classes, R6 classes, and simple environments that are created directly by functions. There are a number of options for R6 that can affect the size of the resulting objects, so we will use a number of variants. These classes will be used for the speed and memory tests that follow. This is a lot of boring code, so you may want to skip ahead to the results.</p>
<p>All of these classes have the same basic characteristics:</p>
<ul>
<li>A field named <code>x</code> that contains a number.</li>
<li>An way of initializing the value of <code>x</code>.</li>
<li>A method named <code>getx</code> for retrieving the value of <code>x</code>.</li>
<li>A method named <code>inc</code> for incrementing the value of <code>x</code>.</li>
</ul>
<p>The fields and methods are accessed with the <code>$</code> operator, so if we have an object named <code>obj</code>, we could use <code>obj$x</code> or <code>obj$getx()</code>.</p>
<div id="r-reference-class" class="section level2">
<h2>R reference class</h2>
<pre class="r"><code>RC &lt;- setRefClass(&quot;RC&quot;,
  fields = list(x = &quot;numeric&quot;),
  methods = list(
    initialize = function(x = 1) .self$x &lt;- x,
    getx = function() x,
    inc = function(n = 1) x &lt;&lt;- x + n
  )
)</code></pre>
<p>In reference classes, the binding that points back to the object is named <code>.self</code>. Within a method, assignment can be done by using <code>.self</code>, as in <code>.self$x &lt;- 10</code>, or by using <code>&lt;&lt;-</code>, as in <code>x &lt;&lt;- 10</code>.</p>
<p>To create an object, simply call <code>$new()</code> on the class:</p>
<pre class="r"><code>RC$new()
#&gt; Reference class object of class &quot;RC&quot;
#&gt; Field &quot;x&quot;:
#&gt; [1] 1</code></pre>
</div>
<div id="r6-class" class="section level2">
<h2>R6 class</h2>
<p>Creating an R6 class is similar to the reference class, except that theres no need to separate the fields and methods, and you cant specify the types of the fields.</p>
<pre class="r"><code>R6 &lt;- R6Class(&quot;R6&quot;,
  public = list(
    x = NULL,
    initialize = function(x = 1) self$x &lt;- x,
    getx = function() self$x,
    inc = function(n = 1) self$x &lt;- x + n
  )
)</code></pre>
<p>Whereas reference classes use <code>.self</code>, R6 classes use <code>self</code> (without the leading period). As with reference classes, objects are instantiated by calling <code>$new()</code>:</p>
<pre class="r"><code>R6$new()
#&gt; &lt;R6&gt;
#&gt;   Public:
#&gt;     clone: function (deep = FALSE) 
#&gt;     getx: function () 
#&gt;     inc: function (n = 1) 
#&gt;     initialize: function (x = 1) 
#&gt;     x: 1</code></pre>
<p>An R6 object essentially just a set of environments structured in a particular way. The fields and methods for an R6 object have bindings (that is, they have names) in the <em>public environment</em>. There is also have a separate environment which is the <em>enclosing environment</em> for methods (they run in an environment that contains a binding named <code>self</code>, which is simply a reference to the public environment).</p>
</div>
<div id="r6-class-without-class-attribute" class="section level2">
<h2>R6 class, without class attribute</h2>
<p>By default, a class attribute is added to R6 objects. This attribute adds a slight performance penalty because R will attempt to use S3 dispatch when using <code>$</code> on the object.</p>
<p>Its possible generate objects without the class attribute, by using <code>class=FALSE</code>:</p>
<pre class="r"><code>R6NoClass &lt;- R6Class(&quot;R6NoClass&quot;,
  class = FALSE,
  public = list(
    x = NULL,
    initialize = function(x = 1) self$x &lt;- x,
    getx = function() self$x,
    inc = function(n = 1) self$x &lt;- self$x + n
  )
)</code></pre>
<p>Note that without the class attribute, S3 method dispatch on the objects is not possible.</p>
</div>
<div id="r6-class-non-portable" class="section level2">
<h2>R6 class, non-portable</h2>
<p>By default, R6 objects are <em>portable</em>. This means that inheritance can be in classes that are in different packages. However, it also requires the use of <code>self$</code> and <code>private$</code> to access members, and this incurs a small performance penalty.</p>
<p>If <code>portable=FALSE</code> is used, members can be accessed without using <code>self$</code>, and assignment can be done with <code>&lt;&lt;-</code>:</p>
<pre class="r"><code>R6NonPortable &lt;- R6Class(&quot;R6NonPortable&quot;,
  portable = FALSE,
  public = list(
    x = NULL,
    initialize = function(value = 1) x &lt;&lt;- value,
    getx = function() x,
    inc = function(n = 1) x &lt;&lt;- x + n
  )
)</code></pre>
</div>
<div id="r6-class-with-cloneablefalse" class="section level2">
<h2>R6 class, with <code>cloneable=FALSE</code></h2>
<p>By default, R6 objects have a <code>clone()</code> method, which is a fairly large function. If you do not need this feature, you can save some memory by using <code>cloneable=FALSE</code>.</p>
<pre class="r"><code>R6NonCloneable &lt;- R6Class(&quot;R6NonCloneable&quot;,
  cloneable = FALSE,
  public = list(
    x = NULL,
    initialize = function(x = 1) self$x &lt;- x,
    getx = function() self$x,
    inc = function(n = 1) self$x &lt;- self$x + n
  )
)</code></pre>
</div>
<div id="r6-class-without-class-attribute-non-portable-and-non-cloneable" class="section level2">
<h2>R6 class, without class attribute, non-portable, and non-cloneable</h2>
<p>For comparison, well use a an R6 class that is without a class attribute, non-portable, and non-cloneable. This is the most stripped-down we can make an R6 object.</p>
<pre class="r"><code>R6Bare &lt;- R6Class(&quot;R6Bare&quot;,
  portable = FALSE,
  class = FALSE,
  cloneable = FALSE,
  public = list(
    x = NULL,
    initialize = function(value = 1) x &lt;&lt;- value,
    getx = function() x,
    inc = function(n = 1) x &lt;&lt;- x + n
  )
)</code></pre>
</div>
<div id="r6-class-with-public-and-private-members" class="section level2">
<h2>R6 class, with public and private members</h2>
<p>This variant has public and private members.</p>
<pre class="r"><code>R6Private &lt;- R6Class(&quot;R6Private&quot;,
  private = list(x = NULL),
  public = list(
    initialize = function(x = 1) private$x &lt;- x,
    getx = function() private$x,
    inc = function(n = 1) private$x &lt;- private$x + n
  )
)</code></pre>
<p>Instead of a single <code>self</code> object which refers to all items in an object, these objects have <code>self</code> (which refers to the public items) and <code>private</code>.</p>
<pre class="r"><code>R6Private$new()
#&gt; &lt;R6Private&gt;
#&gt;   Public:
#&gt;     clone: function (deep = FALSE) 
#&gt;     getx: function () 
#&gt;     inc: function (n = 1) 
#&gt;     initialize: function (x = 1) 
#&gt;   Private:
#&gt;     x: 1</code></pre>
</div>
<div id="r6-class-with-public-and-private-no-class-attribute-non-portable-and-non-cloneable" class="section level2">
<h2>R6 class, with public and private, no class attribute, non-portable, and non-cloneable</h2>
<p>For comparison, well add a version that is without a class attribute, non-portable, and non-cloneable.</p>
<pre class="r"><code>R6PrivateBare &lt;- R6Class(&quot;R6PrivateBare&quot;,
  portable = FALSE,
  class = FALSE,
  cloneable = FALSE,
  private = list(x = NULL),
  public = list(
    initialize = function(x = 1) private$x &lt;- x,
    getx = function() x,
    inc = function(n = 1) x &lt;&lt;- x + n
  )
)</code></pre>
</div>
<div id="environment-created-by-a-function-call-with-class-attribute" class="section level2">
<h2>Environment created by a function call, with class attribute</h2>
<p>In R, environments are passed by reference. A simple way to create an object thats passed by reference is to use the environment created by the invocation of a function. The function below captures that environment, attaches a class to it, and returns it:</p>
<pre class="r"><code>FunctionEnvClass &lt;- function(x = 1) {
  inc &lt;- function(n = 1) x &lt;&lt;- x + n
  getx &lt;- function() x
  self &lt;- environment()
  class(self) &lt;- &quot;FunctionEnvClass&quot;
  self
}</code></pre>
<p>Even though <code>x</code> isnt declared in the function body, it gets captured because its an argument to the function.</p>
<pre class="r"><code>ls(FunctionEnvClass())
#&gt; [1] &quot;getx&quot; &quot;inc&quot;  &quot;self&quot; &quot;x&quot;</code></pre>
<p>Objects created this way are very similar to those created by <code>R6</code> generator we created above.</p>
</div>
<div id="environment-created-by-a-function-call-without-class-attribute" class="section level2">
<h2>Environment created by a function call, without class attribute</h2>
<p>We can make an even simpler type of reference object to the previous one, by not having a a class attribute, and not having <code>self</code> object:</p>
<pre class="r"><code>FunctionEnvNoClass &lt;- function(x = 1) {
  inc &lt;- function(n = 1) x &lt;&lt;- x + n
  getx &lt;- function() x
  environment()
}</code></pre>
<p>This is simply an environment with some objects in it.</p>
<pre class="r"><code>ls(FunctionEnvNoClass())
#&gt; [1] &quot;getx&quot; &quot;inc&quot;  &quot;x&quot;</code></pre>
<hr />
</div>
</div>
<div id="tests" class="section level1">
<h1>Tests</h1>
<p>For all the timings using <code>microbenchmark()</code>, the results are reported in microseconds, and the most useful value is probably the median column.</p>
<div id="memory-footprint" class="section level2">
<h2>Memory footprint</h2>
<p>How much memory does a single instance of each object take, and how much memory does each additional object take? Well use the functions <code>obj_size</code> and <code>obj_sizes</code> (shown at the bottom of this document) to calculate the sizes.</p>
<p>Sizes of each type of object, in bytes:</p>
<pre class="r"><code>sizes &lt;- obj_sizes(
  RC$new(),
  R6$new(),
  R6NoClass$new(),
  R6NonPortable$new(),
  R6NonCloneable$new(),
  R6Bare$new(),
  R6Private$new(),
  R6PrivateBare$new(),
  FunctionEnvClass(),
  FunctionEnvNoClass()
)
sizes
#&gt;                         one incremental
#&gt; RC$new()             461184        1368
#&gt; R6$new()              56624        1008
#&gt; R6NoClass$new()       57328         896
#&gt; R6NonPortable$new()   56216         952
#&gt; R6NonCloneable$new()  13624         896
#&gt; R6Bare$new()          12816         728
#&gt; R6Private$new()       57528        1120
#&gt; R6PrivateBare$new()   13824         840
#&gt; FunctionEnvClass()    10712         624
#&gt; FunctionEnvNoClass()   9288         512</code></pre>
<p>The results are plotted below. Note that the plots have very different x scales.</p>
<p><img src="data:image/png;base64,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" /><!-- --><img src="data:image/png;base64,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" /><!-- --></p>
<p>Some preliminary observations about the first instance of various classes: Using a reference class consumes a large amount of memory. For R6 objects, the option with the largest impact is <code>cloneable</code>: not having the <code>clone()</code> method saves around 40 kB of memory.</p>
<p>For subsequent instances of these classes, there isnt nearly as much difference between the different kinds.</p>
<p>It appeared that using a reference class takes up a huge amount of memory, but much of that is shared between reference classes. Adding an object from a different reference class doesnt require much more memory  around 38KB:</p>
<pre class="r"><code>RC2 &lt;- setRefClass(&quot;RC2&quot;,
  fields = list(x = &quot;numeric&quot;),
  methods = list(
    initialize = function(x = 2) .self$x &lt;&lt;- x,
    inc = function(n = 2) x &lt;&lt;- x * n
  )
)

# Calcualte the size of a new RC2 object, over and above an RC object
as.numeric(object_size(RC$new(), RC2$new()) - object_size(RC$new()))
#&gt; [1] 37176</code></pre>
</div>
<div id="object-instantiation-speed" class="section level2">
<h2>Object instantiation speed</h2>
<p>How much time does it take to create one of these objects? This shows the median time, in microseconds:</p>
<pre class="r"><code># Function to extract the medians from microbenchmark results
mb_summary &lt;- function(x) {
  res &lt;- summary(x, unit=&quot;us&quot;)
  data.frame(name = res$expr, median = res$median)
}

speed &lt;- microbenchmark(
  RC$new(),
  R6$new(),
  R6NoClass$new(),
  R6NonPortable$new(),
  R6NonCloneable$new(),
  R6Bare$new(),
  R6Private$new(),
  R6PrivateBare$new(),
  FunctionEnvClass(),
  FunctionEnvNoClass()
)
speed &lt;- mb_summary(speed)
speed
#&gt;                    name   median
#&gt; 1              RC$new() 341.8910
#&gt; 2              R6$new()  58.5905
#&gt; 3       R6NoClass$new()  51.4860
#&gt; 4   R6NonPortable$new()  58.1885
#&gt; 5  R6NonCloneable$new()  56.9675
#&gt; 6          R6Bare$new()  45.6280
#&gt; 7       R6Private$new()  76.7350
#&gt; 8   R6PrivateBare$new()  65.8470
#&gt; 9    FunctionEnvClass()   4.4305
#&gt; 10 FunctionEnvNoClass()   2.3205</code></pre>
<p>The plot below shows the median instantiation time.</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwAAAAFQCAMAAAA/TuliAAAC9FBMVEUAAAABAQECAgIDAwMEBAQFBQUGBgYHBwcJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKyssLCwtLS0uLi4vLy8xMTEyMjIzMzM0NDQ1NTU2NjY3Nzc5OTk6Ojo7Ozs8PDw9PT0+Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+goKChoaGioqKjo6OkpKSlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+wsLCxsbGysrKzs7O0tLS1tbW2tra3t7e4uLi5ubm6urq7u7u8vLy9vb2+vr6/v7/AwMDBwcHCwsLDw8PExMTFxcXGxsbHx8fIyMjJycnKysrLy8vMzMzNzc3Ozs7Pz8/Q0NDR0dHS0tLT09PU1NTV1dXW1tbX19fY2NjZ2dna2trb29vc3Nzd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojp6enq6urr6+vs7Ozt7e3u7u7v7+/w8PDx8fHy8vLz8/P09PT19fX29vb39/f4+Pj5+fn6+vr7+/v8/Pz9/f3+/v7///8OQntnAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAbUUlEQVR4nO3de3xU5Z3H8VHbrkgrtttaaNVq1eKu7bYs2q51dd3dVhaoWIqkhHALBUEjRJbGiDRShBIhELMYhRAQCJcQRQIxcrXVeqmmQEQF00gEhEJCJIEQBpJ5/tlzzveZGzMJM+F3ciYz38/r1ZCcefLMmWHezEzi61eXYiyBczl9Aow5GQGwhI4AWEJHACyhIwCW0BEAS+hiAEAf1wLrz7rLXO+fd9GzX1MnXSltfWPJqvYu1SuCCr/8/FVt7B5+mVGVa2dk22csDLnww5+0trEr65RiAsAd1p8FrnAATt/zh7a+8dcD27tUrwgq/PLzV7Wxe/hlKgDABbbfd8OZ0EuHLGljV9YpxQKAH1zymfnnvT8IB6Cd2nxERrGi7VUhRy8M4ALb/2ZamEu33+xp/+yYrcUCgFHXPmP8ceKLTxoAPIt/1O375muGxtRvfWvCAgPAddlKNYzr9aXrf2e8WLhuefYtXxl83Pq+210u1+fmpd8tfKTXDc/+fUCP69Yo/wbeFS0zbuned72+LnO5b49dP+vx1fsOYFXINfh2915iHQjcXXl3rnJtvf+rN00/h+19S85Nu7n7ne/g+8zljd33KHVFofFZSj/flauWnts6765mIcUCgNGT/934Y8U/7jAAzL1k4qphrhXKc1e3GYU/vlIDGH3VEyvHu1YaX/zbgE3PfOlB6/sODLinqsUCcE3aqwNd184o73vFGd8GvhUTvpC5eqjrRVyXBUDv0XT17c89/fX/wqqQa/Dt7r3EOhC4u/LuXOX6Rkrxw640bO9bMrr7nNU/veqI9X3m8g1Xe/wAvFeu1NBHOvfuZkHFBIC3Ljmi1H2pr7veP3nlVOPIkBvVDtc6pZqv0QB+scg4+v0pxhe9jcdSym34RvO1hQXgZ0rtMR9/Ja6PfRt4Vxz8wjzjX+V7/wUHLAB6j3ddfzbYjfJY+4Reg3d33yXGgaDdfTtXue4zHtqPfvGYud63pOrSIuNp7fIC30ugdOPffR8A35WruT/slHuZhS8mALR+e6E6dXm5AeAdl/EyQb186dnsL5s/HUnXAIwOr/yHdOML44GopvbBN/oAZBmvN1zGy5/3XR/5NvCu2OQycKlll+D9pwVA73G0223rG737hF6Dd3ffJcaBoN19O1e5SpR55TvM9b4lKy5xG58cqvcB6PeQ8gPwXbl68XK+CXCwmACg0u5WxT3cBoB1LlST/j3zonkawO57v/n1flebD885KgyAWSaAlywAvg28KxZdYkrarA9YALx7vHHXpZcNehv7hF6Dd3ffJcaBoN19O1e53jI+Oe5aba73LZnlfQPvBdD3CaUBDO/nv3L1R1ej7Xcxa7PYAPD6pUcfSFEGgDdcr+40a5pnPQNMAYCGbqN2eVTfdP1PcnsAfBt4V2y0/p1e7jptHbAA+Peof/Huy6rMVWGuQe/uv8Q4ELS7b2c8A+wyGBjrfUsKLzPeFatPDvkA3OYD8PN+/isnAGeLDQCtPed3LzUB1F9u/lg8f6TndfM9wJnrAGCz64BStVdEAsC3gXfFwctyzFfqt+JbAgGsu/G4UtWuTeaqMNegd/dfYhwI2t23c5VroHFg4pWN5nrfkkpXsfEu5ut/8AH4H+sl0FylPr+yn//K+RLI2WIDgJrY48tnTABqWrfpa6dcOkN57uk2Y9kd1wPAJ5cNeGHBzT367AoGMPrmbWfPB+DbwLfiwS9OO++nQHqPqi/ds/i5u3rUmqv2hV6D3t1/3eaBoN29O1e5rklaPtY1G1v7lvzqy9nF937lU+v7zOWPWm+Cv7Vhy529bvrId+V8E+xsMQLgNddQZQHwzL/18t7zjX8TT6Z+u+f4Tfo9wMobr/hJ2as9s4MBvPHd7idCAPg28K44l9X7iuDfA3j32PCjbl/973exKvQavLv7LjEPBO3u3bnK9UH/Hv+0wKN/D+Bdcib9hu7//g42MpeXfsP8MWjfnr0XvN7r174rV0MndeJ9zc4vBgDEUfqnRuE72f19/R4gsJae2208IXahCECyq9sDoMY9HgbAju/xLYCTEYBcJ553FbZ3ufkfw4UAeKDdb2F2RwByvdptYFO7Cx5bGALgI/7n0M5GACyhIwCW0BEAS+gIgCV0BMASOgJgCR0BsITOcQDVxSW2tHadPfuuWWvPvsV23Q9r7Nl3nV33w2q7/uLOP+C2Hn+OA1iXvcWWSjfbs+/6Unv2LSuzZ9/S9fbsu9mm++GVF236i9sQ/GV2nwbr8ec8gDJ79j1p029Y60/as++ZMDODJDpZb8++rTbdD+5am/7iGoK/fIUAOhYBIAIQigAQASACEIoAEAHoCEAmAkAEIBQBIAJABCAUASAC0BGATASACEAoAkAEgAhAKAJABKDrfABN+RvPXngVASACQF0YQP+kpCET9ynVnJeaNPuEqvtN+m+nhr8xnvkt23bpzwkAEQASA/D5+qW7A7+2H8BA45FdMll5MovcDUtmq5dWle2dvjfsyoqX1dnf63E4BIAIAEkBePkal8v1QMBLkE4BoGpS1N4046HtLvCU5WwyHv6VC2aPy2tVJWPGv6TSPlVjSlR+qXq8SamllfguAkAEgIQA1GBIfab/SKcAOLNsgSrLx5fN04bkHVaVv6w/l1qzZ3rzqfQPCjfVj5yhHj7kSTMufs0cKb5zy5YF6+pt6fBxe/Y9eNiefY8etWffwwft2fe4TffDsU9F/uKyAKBXZwLon5w8eEidKl3kPVA8d8QnldOV+n3VijHp6Q9u3zXnzaLUk6mevxvHVNXTxodH+vQZ/tx7jEk3XP//lPjnTnbKM0DL6hy1O9240tak+j8dKdtbsrYyxwSwfL1STW53asGu372Up/wAmhoaija22FLDWXv2rWuwZ9+mJnv2baizZ9+zNt0Pp4+K/MU9h8d/b//Ds3PeA1RPUp7JK8+0LM9UK1eXfZi9DQD+mna6aexB9cSo5uKUN5X/JZDiewBvfA+AhN4DNP2zBaDYf6RzAJwaUq8a540c9lSdapyeOnruOQDwFI0ZZTzQX3pEfTjwlLLeBC/TP6MiAEQASOqnQPv7uVzXLg044MBvgsvC/xAUPwadwR+DBkUASO4XYacPB30ZS/8phCeHvwg7PwJAXfg3wR2LABABIAIQigAQAegIQCYCQAQgFAEgAkAEIBQBIALQEYBMBIAIQCgCQASACEAoAkAEoCMAmQgAEYBQBIAIABGAUASACEBHADIRACIAoQgAEQAiAKEIABGAjgBkIgBEAEIRACIARABCEQAiAB1ng8pEAIgAwuSdDrrroeElsTUb9K2c/CqZfQkAEUCY9HTQptFHT404EkOzQVsfMEdkPC2yLwEgAgiTng76Wp5Sje4Ymg06B1OS3pDYlwAQAYRJTwdd+/T/jiuJaDbon0tKsotrbenQMf/ntwLAgxK3kQAQAYRJTwd9YeyR2nF7Ymg2aC8AGCpxGwkAEUCY9HTQDc8rlb8xktmgqnNeAt0LADMl9iUARABh0tNBD42trR/7UQzNBt1pPf5vOiGxLwEgAgiTdzpo6ciRL8bUbNDXf+z62qD9IvsSACKACxdLs0HdUncrASACuIg4GzQ0AkAJASAwAkAEgAhAKAJABKAjAJkIABGAUASACAARgFAEgAhARwAyEQAiAKEIABEAIgChCAARgI4AZCIARABCEQAiAEQAQhEAIgAdAchEAIgAhCIARACIAIQiAEQAOgKQiQAQAQhFAIgAEAEIRQCIAHScDSoTAaCEAhA087N6gPFZ8wjvZc15qUmzT6iK3PO/yenZoDVzHy04Lb8vAaCEAhA087N6aFqLH4Ans8jdsGR2GAAOzwZdZU5CubFGfF8CQIkGwD/zszpj7noTgKcwdWy52ptmPJDdBZ6K3NYFwyesUY2Pp0zYb31wdjbosW9bs4DuEt+YAFCiAfDP/KzO+HxkrQHg7cfONoz9rCwfSypyq59qaRrWsiHPs32t9SGS2aAbcnOzVh2yo//DMDhXneBdaEUAKKEABM38rM5Q5TMNAAVblVq8rXQRlhgvgerfXjrQXZ26olpZHyKZDZpx992jFu20oyc0APHXQASAEgpA0MxPA4BnymsAULB1d7rxEqg1qb4i94O0Vw6MdauTZZmF1gdnZ4O+h8d/rxbpjQkAJRoA/8xPA4CqGWG8BMo815B6yDN55ZmW5ZnGM0DRC549vzi9bLnn44esDw7PBk22AKwS35cAUMIB8M38NAGopeab4DHGm2DVOG/ksKfqDACHMkbPfybvyKSUcRXWB4dngx6ffctVP94gvy8BoIQC0MFiaTaoWASACOAi4mzQ0AgAJQSAwAgAEQAiAKEIABGAjgBkIgBEAEIRACIARABCEQAiAB0ByEQAiACEIgBEAIgAhCIARAA6ApCJABABCEUAiAAQAQhFAIgAdAQgEwEgAhCKABABIAIQigAQAegIQCYCQAQgFAEgAkAEIBQBIALQcTaoTASA4hZAe3NAcYbmipxz/gPN5fqTjcXmR++QRKdngwZe9bZJoxYKPcAIAMUtgHbmgOozHKRU7cQt/gP1k/QnwQAcng0aCOBRc0LKrZ+L7EsAKJ4BtDUHFHM+TQBqSaH3UMbGOYOXYS7oxrnpo5d4DADWJFBnZ4MGAtiOIVljRPYlABTPANqaA4o5nyaAIw9u04eSqj3GMwDmgm4ccbJ50rsVuZgEGsls0DUzZ2auqLGlqv2+T8cCQE+R+5EAUNwCaGcOKOZ8uo0Vw/Ja9KFZeAlkzQXd+IzxMuiFilxMAo1kNujcYcMmFH5oS3v8n/4aAL4mcj8SAIpbAO3MAcWUN+slkAo4ZADAXFALQFFFLiaBOjsbNPAl0AoA+LnIvgSA4hlAW3NAgwD4D9U/rDAXdOPwxqa0PRW5mATq8GzQAACt91gA9onsSwAorgG0MQc0CID/UEva85gLuvG5tJGrVUUuJoE6PBs08KdAzTP79k6uktmXAFDcAhCMs0GjiABQPAFoM84GDY0AUEIACIwAEAEgAhCKABAB6AhAJgJABCAUASACQAQgFAEgAtARgEwEgAhAKAJABIAIQCgCQASgIwCZCAARgFAEgAgAEYBQBIAIQEcAMhEAIgChCAARACIAoQgAEYCOAGQiAEQAQhEAIgBEAEIRACIAHWeDykQAKO4AXHAmqGrOS02afcI3+jC0GJ0Nem7h4PsXuKX2JQAUdwAuOBPUk1nkblgyO2IAsTIb9NxPzZkofaUeXwSA4hFA+zNB96YZD1l3gaciN/Aopn7G8mzQuRiLlSW0LwGgeATQ/kzQsnwsrMgNPIqpnx2dDVo4deqU5dW2tO9v+pO7AOAOofuRAFDcAbjgTNDSRVhYkRt4VM8B7eBs0IXjx09a9rEtfbRPf3InAPxE6H4kABR3AC44E3R3uvESqDWpHgC8RzH1M5Zng84CgAyhfQkAxSOA9meCeiavPNOyPNN8CRRwFFM/Y3k26Jk+1v89ximhfQkAxSWAdmeCqsZ5I4c9VWfO/gw4iqmfMT0b9PSs//yPLLG/LgJAcQfAhjgbNIoIAMUTgDbjbNDQCAAlBIDACAARACIAoQgAEYCOAGQiAEQAQhEAIgBEAEIRACIAHQHIRACIAIQiAEQAiACEIgBEADoCkIkAEAEIRQCIABABCEUAiAB0BCATASACEIoAEAEgAhCKABAB6AhAJgJABCAUASACQAQgFAEgAtBxNqhMBIASG0DQINGDA5KGDl3sOX+NI7NBm2bcfWfmCfMzAkAEoBMFEDRI9OAE49Ge8sH5a5yYDdr8I3MESm/zphEAIgCdNAD/IFEDgOfI6FrMB61ckLHRudmgegjWo4oAvBGAThqAf5DowYHJwwbmezAftDKp2hP5bFDp0Yh6DujtigC8EYBO9j1A4CBR8yWQe9o2zAetnKVU5LNBpYfj3uOfA0oAiAB00s8A/kGiJgBVmof5oOYkOOdmgz4DAL9TBOCNAHTi7wF8g0RNAK1ZL2M+qPmAd242aIv1FHBbsyIAbwSgEwfgGyRqvAdIHpbtxnxQ8wHv4GzQlsUPDH7G+r9DIgBEADrOBpWJABABXEScDRoaAaCEABAYASACQAQgFAEgAtARgEwEgAhAKAJABIAIQCgCQASgIwCZCAARgFAEgAgAEYBQBIAIQEcAMhEAIgChCAARACIAoQgAEYCOAGQiAEQAQhEAIgBEAEIRACIAHQHIRACIAIQiAEQAiACEIgBEADrOBpWJAFAiAgiaCOo2v8o5Zx7fkRGwqLlcf+LIbFB/UQH4W/JNP8yI7G+UAFAiAgiaCOoepFTtxC3m8aZjAYvqJ+lPnJgNGlA0AD65xponF8HzFQF4S1AA/omgJgC1pNCcBVqZM22XciefsoaDzhm8zLnZoAFFA+B+zNN6NpK1BIASFIB/IqgJ4MiD28xZoJU55fnqnTkYDmo8A0Q+G3TGgAFjC963pd1RrO0JACMjuRMIACUigKCJoG7jq2F5LeYs0MqcE2M8OX/BcFADQOSzQdfMnJm5osaWqvZHvvY7ADA+kjuBAFAiAgiaCGq9BDIf/Nb/Htv3mxYMBzUAODcbNKBoXgJNBoCIzoQAUIIC8E8EDQawacqzCsNB6x92cDZoQNEAaOprPv4fimgtAaBEBeCbCBoMoH7ARwrDQVvSnndwNqi/qH4Meq5w7OStkS0lAJSIAKKNs0GjiABQPAFoM84GDY0AUEIACIwAEAEgAhCKABAB6AhAJgJABCAUASACQAQgFAEgAtARgEwEgAhAKAJABIAIQCgCQASgIwCZCAARgFAEgAgAEYBQBIAIQEcAMhEAIgChCAARACIAoQgAEYCOAGQiAEQAQhEAIgBEAEIRACIAHWeDykQAKK4BRDcE9OCApKFDF3vO3yRmZ4OW3t7ju9NPd3RfAkBxDSC6IaAHJxiP9pQPzt8kVmeDllgzgH7Z0X0JAMU7gCiGgBoAPEdG17ZaR81lMT0b1HMtpmC91sF9CQDFO4AohoAeHJg8bGC+B0fNZZHPBs24++5Ri3ba0l/bOL4Dj3/X/A7ejwSA4hpAdENAzZdA7mnbcNRcFvls0A25uVmrDtnSJwfDH/9YAyjo4P1IACiuAUQ3BNQEoErzcNRcFtuzQfsDwGcd3JcAULwDiGIIqAmgNetlHDWXxfZs0CO3mI//tR3dlwBQ3AOIfAio8R4geVi2G0fNZTE+G9S9fGrOpx3elwBQXAMQirNBo4gAUDwBaDPOBg2NAFBCAAiMABABIAIQigAQAegIQCYCQAQgFAEgAkAEIBQBIALQEYBMBIAIQCgCQASACEAoAkAEoCMAmQgAEYBQBIAIABGAUASACEBHADIRACIAoQgAEQAiAKEIABGAjgBkIgBEAEIRACIARABCEQAiAF2sA+jwrMI2IgBEALqOAWjun2R0IPR4efCgUL3wzaBDealJs0+oityQ7w6ZDXr6t99wXTNf9JYTACIAXQcBDA5/vH5S8KDQMAs9mUXuhiWzwwEImQ063BrVM7P9c4kuAkAEoLsoAG/lK/X4Ycz59BSkpr43Z/CyyhxPYerYcj39Uy/EF9YE0Z1pxkPcXeCpyMXU0MbHUybstz6EzAat1NPaGgVvLwEgAtB19CVQcnJyrheANefzT0+0Vo8yngEqc95+7GzD2M9w1FqYXIMvrAmiZfnYoiIXU0M35Hm2r7U++AdjPdKnz/Dn3ntvlgawU/D2EgAiAJ3EM8B0c8hVXrlSjRaAgq1KLd6Go95nAOsLa4Jo6SJsYbwEsqaGVqeuqFbWB/9oxD+XlGQX19YWawAdH1cVGgEgAtBdNIAJhzHlbcFmperqvAAKtuKoF4D1hTVBdHe68RKoNam+IhdTQ9XJssxC60PIbNDTN1mP/zvlbi0BeCMA3UUBqJjaWtNfA9g2vfXQ8LqHzZdAmecaUg+FA2BOEPVMXnmmZXmm8QyAqaHLlns+fsj6EDob9C/XG4//WyWfAAhARwC6iwJwZva4uTM0gJb8ManvtqQ9b74JHmO+CQYA6z1AkQZgThBVjfNGDnuqzgCAqaFHJqWMq7A+hJkNenLN0y+fE729BIAIQBdLvwjjbNDQCAAlBADOBg2NAFBCAAiMABABIAIQigAQAegIQCYCQAQgFAEgAkAEIBQBIALQEYBMBIAIQCgCQASACEAoAkAEoCMAmQgAEYBQBIAIABGAUASACEBHADIRACIAoQgAEQAiAKEIABGAjgBkIgBEAEIRACIARABCEQAiAF0MA/AclB4MqgjAGwHoIgVwEdNAqwfsMw6P8C2IcDZozjddrvsORXxDIowAEAHoIgbQ8Wmg1UPTWvwAIp0NOtmaCfSv7gvegugiAEQAuigBdGQa6J6MuetNAFi1N4LZoE0NDUU3YCrcOuHbSwCIAHSRvwTq8DTQ6ozPR9YaALAqwtmgSVcBwFPCt5cAEAHoOvYMMD2aaaDVGap8pgEAqyKZDbpzy5YcDaBA+PYSACIAXQcARDsN1ADgmfIaABRsjXQ26BDr8f+dWuHbSwCIAHRRAujINFADgKoZYbwEslZFOht0/S+Mx//1f5S+vQSACEAXJYCOTAM1Aail5ptgc1Xks0F3LS0/JX57CQARgC6WfhHG2aChEQBKCACcDRoaAaCEABAYASACQAQgFAEgAtARgEwEgAhAKAJABIAIQCgCQASgIwCZCAARgFAEgAgAEYBQBIAIQEcAMhEAIgCh1mVvsaXSzfbsu77Unn3LyuzZt3S9Pftutul+eOVFm/7iNgR/mR0jAE6l9mHMge44ExMAjvfZ0NCluv9Jp88gumbc5/QZRFdpn+rOuaJmPACdB7DF4TOIssGznT6D6PrD/U6fQXRt63PswosEcxpAw/gKh88gyp5c5fQZRNeaLKfPILp2jj/RqdfnNADGHI0AWELnNIDysePedfgUIq3mSeU9365w1kWpI1Z3ofNtmT98xAYHztdhAMdGnfx7ivRQOHtanZrlPd+ucNZ7xzSfGFfZdc73T4+56391ovPP12EAr8xRanKls+cQYTvXZXnPtyuc9ZsvKbVwS9c53wM1nuOppzv/fB0GsLJIqZwdzp5DpH2Q5T3fLnLWn46q7Urnu6j/Wgfu3xgAsHC7s+cQaV4AC7d3ibNuLR79YVc6X6WOjtrf+efrMIAy48luxq4Lr4uFTAA4365w1i1ZuU1d6Xw3Vig1Z0fnn6/DAGrHNNeNjvG3Z95MADjfrnDWO2abg5e6zvmWZ7U2Dj/Q+efr+I9BJ06M9R/QeTMB6PPtAmedP3DQoEHlXed8z80baY4T7PTzdRoAY45GACyhIwCW0BEAS+gIgCV0BMASOgJgCd3/A7FglpxX2wYnAAAAAElFTkSuQmCC" /><!-- --></p>
<p>Reference classes are much slower to instantiate than the other types of classes. Instantiating R6 objects is roughly 5 times faster. Creating an environment with a simple function call is another 20-30 times faster.</p>
</div>
<div id="field-access-speed" class="section level2">
<h2>Field access speed</h2>
<p>How much time does it take to access a field in an object? First well make some objects:</p>
<pre class="r"><code>rc           &lt;- RC$new()
r6           &lt;- R6$new()
r6noclass    &lt;- R6NoClass$new()
r6noport     &lt;- R6NonPortable$new()
r6noclone    &lt;- R6NonCloneable$new()
r6bare       &lt;- R6Bare$new()
r6priv       &lt;- R6Private$new()
r6priv_bare  &lt;- R6PrivateBare$new()
fun_env      &lt;- FunctionEnvClass()
fun_env_nc   &lt;- FunctionEnvNoClass()</code></pre>
<p>And then get a value from these objects:</p>
<pre class="r"><code>speed &lt;- microbenchmark(
  rc$x,
  r6$x,
  r6noclass$x,
  r6noport$x,
  r6noclone$x,
  r6bare$x,
  r6priv$x,
  r6priv_bare$x,
  fun_env$x,
  fun_env_nc$x
)
speed &lt;- mb_summary(speed)
speed
#&gt;             name median
#&gt; 1           rc$x 8.2915
#&gt; 2           r6$x 1.3370
#&gt; 3    r6noclass$x 0.2765
#&gt; 4     r6noport$x 1.5400
#&gt; 5    r6noclone$x 1.5040
#&gt; 6       r6bare$x 0.2720
#&gt; 7       r6priv$x 1.4420
#&gt; 8  r6priv_bare$x 0.3170
#&gt; 9      fun_env$x 1.2555
#&gt; 10  fun_env_nc$x 0.2885</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Accessing the field of a reference class is much slower than the other methods.</p>
<p>Theres also an obvious pattern where accessing the field of an environment (created by R6 or a function call) is slower when there is a class attribute. This is because, for the objects that have a class attribute, R attempts to look up an S3 method for <code>$</code>, and this lookup has a performance penalty. Well see more about this below.</p>
</div>
<div id="field-setting-speed" class="section level2">
<h2>Field setting speed</h2>
<p>How much time does it take to set the value of a field in an object?</p>
<pre class="r"><code>speed &lt;- microbenchmark(
  rc$x &lt;- 4,
  r6$x &lt;- 4,
  r6noclass$x &lt;- 4,
  r6noport$x &lt;- 4,
  r6noclone$x &lt;- 4,
  r6bare$x &lt;- 4,
  # r6priv$x &lt;- 4,         # Can't set private field directly,
  # r6priv_nc_np$x &lt;- 4,   # so we'll skip these two
  fun_env$x &lt;- 4,
  fun_env_nc$x &lt;- 4
)
speed &lt;- mb_summary(speed)
speed
#&gt;                name  median
#&gt; 1         rc$x &lt;- 4 41.8040
#&gt; 2         r6$x &lt;- 4  1.9395
#&gt; 3  r6noclass$x &lt;- 4  0.8435
#&gt; 4   r6noport$x &lt;- 4  2.2830
#&gt; 5  r6noclone$x &lt;- 4  2.1140
#&gt; 6     r6bare$x &lt;- 4  0.8385
#&gt; 7    fun_env$x &lt;- 4  1.9350
#&gt; 8 fun_env_nc$x &lt;- 4  0.8430</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Reference classes are significantly slower than the others, again. In this case, theres additional overhead due to type-checking the value.</p>
<p>Once more, the no-class objects are significantly faster than the others, again probably due to attempted S3 dispatch on the <code>`$&lt;-`</code> function.</p>
</div>
<div id="speed-of-method-call-that-accesses-a-field" class="section level2">
<h2>Speed of method call that accesses a field</h2>
<p>How much overhead is there when calling a method from one of these objects? All of these <code>getx()</code> methods simply return the value of <code>x</code> in the object. When necessary, this method uses <code>self$x</code> (for R6 classes, when <code>portable=TRUE</code>), and in others, it just uses <code>x</code> (when <code>portable=FALSE</code>, and in reference classes).</p>
<pre class="r"><code>speed &lt;- microbenchmark(
  rc$getx(),
  r6$getx(),
  r6noclass$getx(),
  r6noport$getx(),
  r6noclone$getx(),
  r6bare$getx(),
  r6priv$getx(),
  r6priv_bare$getx(),
  fun_env$getx(),
  fun_env_nc$getx()
)
speed &lt;- mb_summary(speed)
speed
#&gt;                  name median
#&gt; 1           rc$getx() 8.6270
#&gt; 2           r6$getx() 2.9195
#&gt; 3    r6noclass$getx() 0.7290
#&gt; 4     r6noport$getx() 1.7585
#&gt; 5    r6noclone$getx() 3.1265
#&gt; 6       r6bare$getx() 0.4760
#&gt; 7       r6priv$getx() 1.9530
#&gt; 8  r6priv_bare$getx() 0.5015
#&gt; 9      fun_env$getx() 1.5030
#&gt; 10  fun_env_nc$getx() 0.4650</code></pre>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwAAAAFQCAMAAAA/TuliAAAC7lBMVEUAAAABAQECAgIDAwMEBAQFBQUGBgYHBwcJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKyssLCwtLS0uLi4vLy8xMTEyMjIzMzM0NDQ1NTU2NjY3Nzc5OTk6Ojo7Ozs8PDw9PT0+Pj4/Pz9AQEBBQUFCQkJDQ0NFRUVGRkZHR0dJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+goKChoaGioqKjo6OkpKSlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+wsLCxsbGysrKzs7O0tLS1tbW2tra3t7e4uLi5ubm6urq7u7u8vLy9vb2+vr6/v7/AwMDBwcHCwsLDw8PExMTFxcXGxsbHx8fIyMjJycnKysrLy8vMzMzNzc3Ozs7Pz8/Q0NDR0dHS0tLT09PU1NTV1dXW1tbX19fY2NjZ2dna2trb29vd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojp6enq6urr6+vs7Ozt7e3u7u7v7+/w8PDx8fHy8vLz8/P09PT19fX29vb39/f4+Pj5+fn6+vr7+/v8/Pz9/f3+/v7///9kBy5QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAbCklEQVR4nO3de3wU5b3H8UVbj0gttsdasdajWGt7as8pBy/HG8XjpQJSrVVpArkJAgZMOYBKUgW5iiEhh4KI3CRyMYhxWQLIpWpbaEAQEFACCFFAICWBEEI2+/x3ZubZmcnkt5ud+WUnm2W+n9fLbDI7++yTZN+wG+CnTyDk4XyJ3gBCiQwAkKcDAOTpAAB5OgBAng4AkKdrKwDdfAXa5YmLfTubXfXn74vTvtRoNyx5u6Vrw2fE6Krp8r+W17huSsSrlO21cErsO3fU3l92OJDqO20eMLatb0OI0TPIzXbf0RjXbXiotgNwp3Y5xxcJwNmek6Ld8KneLV0bPiNGsQGoa8QAEPmU2HfuqOeu8tdN6nnWPEABfH7DOXq7x9+M6zY8VJsB+GWHr9TLB38ZCUALxX6EXUgAnu7Z7AAF8PSYCLdbf1MorvvwTm0GIO3H6rfy1LdfVgCE3vhVx1vU5w41mddcM7jg+/KRVT2wyyXX/0n5vfy6hVN+dvljJ7Xb3ebz+f6pXtt17rAuN/z5aK/O1y0R5gL6GcGxP+vUfUX4vhrG3NTp7s1NFmwKIOI68l4mv9T18t8qd2ssZmxPND9FX1o7ql5t3Jd+5/qlsdXt93f+3iOHzEtyhdL9ynIHJnRtcqW67abbEDWddglx2VzlvdSHzNsGr17n8jfwQq3NAKQ/d49y8da/blAATO0w5O1+vrdE6N6OY+fe/t0wgPQrchcN8i1SPvjvXiunX/KMdrtDvXruC2oArs1e3dv347Fl3S87ZyxgnDH4Wy8sfsK3XN5XeqfJi++64oi5oAVApHXkvXR55P0/fXuIEPpi5vaMjein6EtrR7X71O/LuPPwpX4XtVfdNuvVK+8zLskVal/9/vZ951UAxieobNuyDVF6VcgEYN72iWFt8m288Go7AH/vcESIRzI/8u08/d2RypHHbxQbfO8IUXdtGECf2crRW0YoH9ysPKZSb5U31J95dL1fiF2+bOVlp+8LYwH9jMPfek35VfPB/9A+3ndRsfJbzaVzzAUtACKuo93Lz5VfwJ+6w1zM3J6xkfAp5tL6UyD9gH7n+qVxF+W+vyr+00L6JblCW0Z9CqQAMDembNu6jRzl130DgHnbqf/p1nfuAq/tADT+aIY4c2mZAmCzT/ldXLx30fkp31F/eJHzfePJ9deL/iVH+UB5YImR3eQNDQAvKU8rfMrTlp2+PcYC+hkrfQouMb+D9vLwrQ71ytvKKnNBC4CI62j3ot5tzm3mYub2jI2ETzGXbvIaQDug37l+adzFsY63rqhR3tUvyRVaYQDmxpRtW7fx0FBhAjBvu/xSvAhg1XYARHYPsaxzvQLgHZ/sYM5P1ateCwP49MEfXvnQVSqAySICgAnqA/dd7YFrLKCfMbuD+hhZIw9M0F8uGgtaAERcR7sX9W6VR7exmLk9YyPhU8yldQD6Af3O9UvzLj6+96KL+24S+iW9Qi0MwLxS2bZ1G91zRRhAykPCvO1ffAYi5KQ2BPDRRcd+nyoUAB/7Vm9Tq31N+7VthARQ3TFte0h0zwn/dtASAGMB/Qy/9ov2Qp/288O5Fzcob/dXmgtGA2CuY/yIR3l0G4uZ22u6EfUUc+kwAOOAfuf6ZdOtVi3vcfE+/TLSFQYA80pl29Zt3JorwgAeUJ8M6bcFAGZtCKDx6mmd3lcBVF36pnJk5oDQR+qz23PXSQBrfIeEOH6ZHQDGAvoZhy/OV5+2/0L7eIdvmfKc+cpJ5oLRAJjrNH10G4uZ22u6EfUUc+kwAOOAfuf6pXEX79x4UogK30r9klyhrRMGYG5M2bZ1G7/RngJNFeKf331ImLfFUyBmbQhADOn8nXMqADGmY97SEReNFaGeHcfOv/N6CWD/xb0WFNzUudt2K4D0m9adbw7AWMA445lvjzF/CvS770xZ9uDlX5oLRgNgrqPfi/b8Rl/M3F7TjainmEurR5Vj5oHwnRuX+l3su6TnG7Pu7XxcvyRXaHcSBmBuTP0pkGUbf9ReBF9TuvbuLj/ZY94WL4KZtSWAjb4nhAYgNO0Xl948Tfkl63Tmj64etDL8GmDRjZfdEVh99RQrgI+7djpFABgL6Gc0vHTzZcafA5zLuaHTPZubLBgVgLGOfi8aAGMxY3tNN6KdYiytHlWvNQ7od65fGndR+quO3/ufcvOSXKGmAzCuVLdt2cb7P1B/DNr96psLPurylHnbJ4a7+/27YMNfhkuyTnfaGX4N0LTg1esTsZkLIABItga+GAHAhp/iJQAvAEi21L8MRwD8vvkBZDMASLqen0EA7MFfh+YGAMjTAQDydACAPB0AIE8HAMjTAQDydACAPF3bADhY4k5LXVpXXXqJe2svW+be2ktcXNvFL/c7i99xb/HI38r6NgTw3mtr3WhNqSvLavlXuLd2IODe2iv87q1dusa1pVcvL3Nt7bWRHiZTulW3JYC1riwbcvEfgZypcm/tcxEm+8SrqjPurV3j3l84Ch4/79raojrCsVUA0HIAQAMAbgBgCQBIAMAJAGgAQAMARgBAAwBuAGAJAEgAwAkAaABAAwBGAEADAG4AYAkASADACQBoAEBzE0DtTL+NnQOAJQAgJSuAE0/njBpp+QfZdWXhd0LTguu2h98HAEsAQIo/gLOr5vwt/K6LAN59O7A3b2/TI1X6iLKt74nz48JfMQCwBACkuAPY3NXn890rv4nxB7CjYLQ/NCczc0sgf6Xy8A/OzMx9Za8oyRj0rpj82PxV08XHE8SLtULM2yHPBwBLAECKN4Cartp8+ce1D1wA8GRF6MPcxoq0ujGPF30t1r/UeOjhvbvy6s7kfKb8DhAatXVIVShbOW9jifJm29q1RSuq3OjkV64sq3XksHtrHzvm3tqHj7i39lcnXVv6xJfH47regvD/YeGUSwAmCFFUpv2SsGxq//0F64QYsvetjJycZ9arT4EOP/qBOJqnnLfvVeXNsG7dUmdtQagNeyEMoMIlAPlCFKxRXgNvPBLYW7I0XwEwdO/CFULU1qsA9j6+uAmA2urqpauDbtRwypVltWpOuLd2ba17a5+ocW/tUw2uLV1/rC6u662Tj/8fnHMPwLq8xsqUhYsDu6esW6s9Bfok+2xt1uGqZ0XD8P3PfGU+BRJ4DdAsvAYgxfs1QON9GoAJ2gfuAAjOzMgsr8nLTJ/aEJyePv7lylBxRlpABLNff7tYlL8YUl8Ez/9Ung8AlgCAFPefAp1IVX79nyh/Qu/qnwQH9ioeNoq67PpmV6g/Bh2LH4NGCgBILvxB2PlKfbuu/1WIU5NGPPuX5gdD+fiDsCgBAClZ/yTYZgBgCQBIAMAJAGgAQAMARgBAAwBuAGAJAEgAwAkAaABAAwBGAEADAG4AYAkASADACQBoAEADAEYAQAMAbgBgCQBIAMAJAGgAQAMARgBAAwBuAGAJAEgAwAkAaABAAwBGAEADAG4AYAkASADACQBoAEDDbFBGAEADgKZtH5pS4tnZoJ8U/t8u/toAQEo+ALXpx870P+LR2aDPqCM3nmevDQCk5AKgjgbdWKR8Qeq9ORt0rpy69B53bQAgJRmAJytCS1/934Elws5s0L+WlOQvP+5G3xx2ZVmtyi+jX3evBPAY9xsCAKQkAzBBiAVZR44PVJ4He3E26M8lgPu43xAAICUZgHwhSl8XYqb/QxuzQcUF9xQoVQIYxl0bAEjJB6Ay63hV1p5FnpwNWqE9/q/7mrs2AJCSD4B4f8CA5cKjs0E/6eHzPbCbvTYAkJILQNM8Ohu0IdiKtQGAlLwA1DAb1FkAQEpuADEDAEsAQAIATgBAAwAaADACABoAcAMASwBAAgBOAEADABoAMAIAGgBwAwBLAEACAE4AQAMAGgAwAgAaAHADAEsAQAIATgBAAwAaADACABoAcAMASwBAAgBOAEADABoAMAIAGgBwAwBLAEACAE4AQAMAGmaDMgIAmocAaIM/SVsLmx9xaTbo+tzc9TZOAwAaANCcA5CDP8lhCsCV2aChP6hTR/4Q+6sNADQAoDkDYA7+3FEwcWBRY2huZlaZCM3JzNyytbCxIGXwElHzYurgA9obV2aDzpFzp96IeSIA0ACA5hCAMfhzx6NVDZkHNz1/vjrrqw9zGyvSthRWjA/W9guWFoXWL9Xe2JkNWlpYOG5JpYN+LQE8EPMTAwAaANAcAjAGf+7IE2LcvjkfCPHGuiLlqX3NlkJRtWle7/qKzLcqhPbGzmzQ0T16ZMze5qBuEsBdMT8xAKABAM0hAGPwp/qeBDDng4I1yive8sLPslcdyqoXpwMvzNXeuDIbNFsCeDbmiQBAAwCacwBy8KcEsOmFhurMynV5jZUp5YXFC0K7+pydvzD0xVDtjSuzQb+5Xn38X38s5okAQAMAmnMAcvCnBBCam6G8CA7OzMgs31pYOTp92vSiI8NTB27V3rgzG/TAk126PHEg9nkAQAMAGmaDMgIAGgBECbNBnQUApOQGEDMAsAQAJADgBAA0AKABACMAoAEANwCwBAAkAOAEADQAoAEAIwCgAQA3ALAEACQA4AQANACgAQAjAKABADcAsAQAJADgBAA0AKABACMAoAEANwCwBAAkAOAEADQAoAEAIwCgAQA3ALAEACQA4AQANACgYTYoIwCgeQxA5PmgTaorc2s2qM3sAKialDpqB2NtAKB5C0CU+aBNqhruzmxQ29kAsPfH6oiVOc7XBgCadwBEng8amP3HtPkh+b56xuTH5rsyG9R2NgDcLodsHXK8NgDQPAQg4nzQQEp13fBt8n31DOUXezuzQZe88kpu8UFX2hfrhO3y8e+b6/iLBgA0DwGIOB80UCCEf5F8Xz1De7YTezbo1H79hs7b7Uo7Y53wlzCAmY6/aABA8xCAiPNBA/OEWLlQvq8eVx7rrswGtV3sp0Ch6yWAbY7XBgCatwDQ+aCBrJqzwz+R72sAnhWuzAa1nY3XAKu1x/9Q52sDAM1bAOh80MCkYf3VF8Hq++rxYPbr7swGtZudH4Nu6v2Tu99ojH1e8wCA5h0AkQssi3QQs0EdBwCk5AWghtmgzgIAUlIA4AcAlgCABACcAIAGADQAYAQANADgBgCWAIAEAJwAgAYANABgBAA0AOAGAJYAgAQAnACABgA0AGAEADQA4AYAlgCABACcAIAGADQAYAQANADgBgCWAIAEAJwAgAYANABgBAA0AOAGAJYAgAQAnACABgA0zAZlBAA0zwCIPBV0ayE91v5ng3JzAiC05KleL5+yfz4AkNoVgChTQSMBaPezQdk5AdBfHb3S9ajt8wGA1G4ARJ4KGpqTmblla6E+FlS9Qk4CbfezQdk5AOCXw7eetH0DACC1HwARp4J+mNtYkbalMDwWVLtCTgK1Mxt07siRo96qcKXP3VlWW3qP7VPTJIAf2P6GAACp/QCIOBW0SHliX7OlMDwWVLtCTgK1Mxt0xqBBOQu+cKU97iyrLf2Z7VNTJYArbX9DAIDUfgBEnApasEZ5vVteaI4FHbdPTgJt77NB+Tl4ClQiAfS1fQMAILUrAHQq6Lq8xsqU8kJzLOi4fXISaLufDcrOyYvg36qP/+vs/z8IAIDUrgDQqaDBmRmZ5eqLYH0sqHKFNgm0/c8G5eYEQHDWQ3c9Z/+HQABAazcAHIfZoM4DAFLyAlDDbFBnAQApuQHEDAAsAQAJADgBAA0AaADACABoAMANACwBAAkAOAEADQBoAMAIAGgAwA0ALAEACQA4AQANAGgAwAgAaADADQAsAQAJADgBAA0AaADACABoAMANACwBAAkAOAEADQBoAMAIAGgAwA0ALAEACQA4AQANAGiYDcoIAGheBaCNCvUvi3RVPGaDruzb/amtNrZBAwAaANBaCUCOCo0MIA6zQSdpQ3X8sfdBAwAaANBaAcAcFeqfmpP+ZqixIGXwEu1ovGaDHpJTpa5tYHxiAEADAFprABijQv39T9cNL68YH6ztF1SP2p8N2vJoxAIJwLeb8YkBAA0AaK0BYIwK9U8Xwr9AVG2a17tePWp/NmjLw3FnhAF8zvjEAIAGALTWADBGhWoAij/LXnUoq149Gq/ZoEfl4//GxqhnRA8AaABAayUAOSrUn1JTm72reEFoV5+z6tG4zQZ9UwPwMecTAwAaANBaCUCOCvXPyh6wWFSOTp82vUg9Gr/ZoFsG/SbnAOPTAoBIAQANs0EZAQANAKKE2aDOAgBScgOIGQBYAgASAHACABoA0ACAEQDQAIAbAFgCABIAcAIAGgDQAIARANAAgBsAWAIAEgBwAgAaANAAgBEA0ACAGwBYAgASAHACABoA0ACAEQDQAIAbAFgCABIAcAIAGgDQAIARANAAgBsAWAIAEgBwAgAaANAwG5QRANA8DUAbEGq2YbR2EY/ZoPycA6jMuPmWYSftnAkANC8DkANCm3z8jXYRh9mgrcgxgGP/po5g+fdaG6cCAM2rAMwBoYHZf0ybH1I/3pE/Zruo/0NJq2eDtibHAJ6WU7jG2jgVAGieBWAMCA2kVNcN36Z+vCO/bKbYPNnObNCxvXoNfHOnK33q8PyfSQAP2/ikAYDmWQDGgNBAgRD+RerHO/JPZYTy/2FnNuiSV17JLT7oSvscnv8rCeAxG580ANA8C8AYEBqYJ8TKherHyn/Pf/50sPWzQVuT46dA4yWABTZOBQCalwHIAaGBrJqzwz8JA1g54s8iDrNBW5FjAOd/rT7+n7TzfQQAmpcByAGhgUnD+isvgiWAql574jIblJ/zH4M2vj3o2VJbZwIAzasAzAL0/5OE2aDOAwBS8gJQw2xQZwEAKUkAcAMASwBAAgBOAEADABoAMAIAGgBwAwBLAEACAE4AQAMAGgAwAgAaAHADAEsAQAIATgBAAwAaADACABoAcAMASwBAAgBOAEADABoAMAIAGgBwAwBLAEACAE4AQAMAGgAwAgAaAHADAEsAQAIATgBAAwAaZoMyAgDaBQ8g8vxPmT/iv4aMy2zQM6NuuOKO1S2dESUAoAEAzS6AKPM/ZZEBxGM2aOhBbVhPoIVTot0SAEgAQLMDoIX5n2e1E/xTc9LfDDUWpAxeop0sJ4EG4jAbNCCnVf3E+ScGADQAoNkCEH3+pzzB3/903fDyivHB2n5B9Uo5CdTObNDRPXpkzN4WvWclAJ/z7xwA0ACAZgtAS/M/1fzTlf8WiKpN83rXq1fKSaB2ZoOWFhaOW1IZvbFhAA2OPzEAoAEAzRaA6PM/5QkagOLPslcdyqpXr5STQOMxG3S/fPz/zvknBgA0AKDZBRBl/qfMn1JTm72reEFoV5+z6pVyEmhcZoMuUB//txx3/okBAA0AaHYBRJn/KfPPyh6wWFSOTp82vUi9Uk4Cjc9s0P1TRxU7fwIEAJECAJqzPwiLMv4wWpgN6jwAILVjAEfnaLX0eMBsUGcBAKkdAXAjALAEACQA4AQANACgAQAjAKABADcAsAQAJADgBAA0AKABACMAoAEANwCwBAAkAOAEADQAoAEAIwCgAQA3ALAEACQA4AQANACgAQAjAKABADcAsAQAJADgBAA0AKABACMAoAEANwCwBAAkAOAEADQAoHlpNui5xgjncQIAmqcAhMZPs7F0XGaDsiMA1v+X73t9KuKyNgDQPAWgdqCdpeMxG5RfcwDlcsbiqXisDQA0TwHIf/T1v88U4sWvdxRMHFik/yKvjf+UR7S5oSVxmA3KrzmA++WIrfHxWBsAaJ4CcGawCAN4tKoh86A8KMd/yiPa3FA7s0GHdeuWOmtLW/RDCeCpeHzRAIDmUQB5QozbJw/K8Z/ySHhuaOzZoH8tKclfftyNvjls/fjnEsDQeHzRAIDmRQCDv1bHwOkA5PjP8BF1bmg8ZoPya/4UaIoE8Pd4rA0ANK8B2Dqy8eDDFgBy/Gf4iDo3NC6zQdk1B9DYT338F8RlbQCgeQ3AuYkDp461AJDjP8NH1Lmh8ZkNyo3+OcA/Cmfvj8/aAEDzFAC7YTao8wCA1N4BtDwgFLNBnQUApPYOoJUBgCUAIAEAJwCgAQANABgBAA0AuAGAJQAgAQAnAKABAA0AGAEADQC4AYAlACABACcAoAEADQAYAQANALgBgCUAIAEAJwCgAQANABgBAA0AuAGAJQAgAQAnAKABAA0AGAEADQC4AYAlACABACcAoAEArZ3PBg0eav6vKe0GADQAoNkBYG8UKKn1s0Eb8nw+X/+TnDsHgAgBAM0OAHujQEmtnw36ojbK5wHWlxYAaABAswPA3ijQs9pReSA0JzNzS8DGbNDa6uqlq4NRqpazrHx/43xiAEADAJodAPZGgcrD8sCHuY0Vaa2eDbosDGAe5xMDABoA0JwBaHkUqJo8UFSmfUVizwbdtnZt0YqqKH0RBrCK84kBAA0AaA4AxBgFKg/LAwVrlNfAG1s9G7Sv9vi/uY7ziQEADQBoNgHYGAUqkwfW5TVWpixs9WzQE/eoj/9PWZ8YANAAgGYTgI1RoDJ5IDgzI7M8HrNBN837gPkHAQBAAwAaZoMyAgCadwBEGQUabUIoZoM6CwBI7QxAvAMASwBAAgBOAEADABoAMAIAGgBwAwBLAEACAE4AQAMAGgAwAgAaAHADAEsAQAIATgBAAwAaADACABoAcHvvtbVutKbUlWW1/CvcWzsQcG/tFX731i5d49rSq5eXubb22kgPkyltC6AbQu2rO8+1IYDz1UnX+N6J3gGvXhMSvQNWO7ttaON7DP8LlLYBkIS9+kiid8Crz9RE74DVgW6bE3PHABClpXmJ3gGv3GWJ3gGro4P2xD7JjQAAeToAQJ4OAGjFmf0Xa++k9e3bN9LPkNtnxm7LsgaWJ3oz9itWtt1Hm4qTkC83AJD2ZtSdGqhO9GrISPRWnGTs9pu000dTueNWE1LoJXUQVWK+3ABA+tu7QsxQ/+j6yKhEb8VJxm5XTRbiuR0J3YvDNs9S3ybmyw0Akfoy7bjydnvWkKx3E70V2xm7XVQsRP6GRG/HQQ0jTqsXiflyAwCtcVn6bvXyi2X1Xz6zK9G7sZuxWxXAjPWJ3o6DyuQrrsR8uQGAFHypsFZ7pz4oxDx/gndjO2O3AeUp0NjtMc9vP42p0C4S8+UGANKGiepfegweDpVOPH8y5/NEb8ducrfKto9n1J1IT6IXwTVpoQR+uQGANLN33759y6ofrj8/td+A9xO9G9vJ3SrbFmVDhiTRj0HFugLlTcK+3ACAPB0AIE8HAMjTAQDydACAPB0AIE8HAMjT/T9SZ7phH61DJgAAAABJRU5ErkJggg==" /><!-- --></p>
<p>The reference class is the slowest.</p>
<p><code>r6</code> is also somewhat slower than the others. There are two reasons for this: first, it uses <code>self$x</code> which adds some time, and second, it has a class attribute, which slows down the access of both <code>r6$getx</code> and <code>self$x</code>.</p>
<p>One might expect <code>r6priv</code> to be the same speed as <code>r6</code>, but it is faster. Although accessing <code>r6priv$getx</code> is slow because <code>r6priv</code> has a class attribute, accessing <code>private$x</code> is faster because it does not have a class attribute.</p>
<p>The objects which can access <code>x</code> directly (without <code>self</code> or <code>private</code>) and which lack a class attribute are the fastest.</p>
</div>
<div id="assignment-using-selfx---vs.-x--" class="section level2">
<h2>Assignment using <code>self$x &lt;-</code> vs. <code>x &lt;&lt;-</code></h2>
<p>With reference classes, you can modify fields using the <code>&lt;&lt;-</code> operator, or by using the <code>.self</code> object. For example, compare the <code>setx()</code> methods of these two classes:</p>
<pre class="r"><code>RCself &lt;- setRefClass(&quot;RCself&quot;,
  fields = list(x = &quot;numeric&quot;),
  methods = list(
    initialize = function() .self$x &lt;- 1,
    setx = function(n = 2) .self$x &lt;- n
  )
)

RCnoself &lt;- setRefClass(&quot;RCnoself&quot;,
  fields = list(x = &quot;numeric&quot;),
  methods = list(
    initialize = function() x &lt;&lt;- 1,
    setx = function(n = 2) x &lt;&lt;- n
  )
)</code></pre>
<p>Non-portable R6 classes are similar, except they use <code>self</code> instead of <code>.self</code>.</p>
<pre class="r"><code>R6self &lt;- R6Class(&quot;R6self&quot;,
  portable = FALSE,
  public = list(
    x = 1,
    setx = function(n = 2) self$x &lt;- n
  )
)

R6noself &lt;- R6Class(&quot;R6noself&quot;,
  portable = FALSE,
  public = list(
    x = 1,
    setx = function(n = 2) x &lt;&lt;- n
  )
)</code></pre>
<pre class="r"><code>rc_self   &lt;- RCself$new()
rc_noself &lt;- RCnoself$new()
r6_self   &lt;- R6self$new()
r6_noself &lt;- R6noself$new()

speed &lt;- microbenchmark(
  rc_self$setx(),
  rc_noself$setx(),
  r6_self$setx(),
  r6_noself$setx()
)
speed &lt;- mb_summary(speed)
speed
#&gt;               name median
#&gt; 1   rc_self$setx() 51.240
#&gt; 2 rc_noself$setx() 31.281
#&gt; 3   r6_self$setx()  5.347
#&gt; 4 r6_noself$setx()  2.558</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>For both reference and non-portable R6 classes, assignment using <code>.self$x &lt;-</code> is somewhat slower than using <code>x &lt;&lt;-</code>.</p>
<p>Bear in mind that, by default, R6 classes are portable, and cant use assignment with <code>x &lt;&lt;-</code>.</p>
</div>
<div id="overhead-from-using-on-objects-with-a-class-attribute" class="section level2">
<h2>Overhead from using <code>$</code> on objects with a class attribute</h2>
<p>There is some overhead when using <code>$</code> on an object that has a class attribute. In the test below, well create three different kinds of objects:</p>
<ol style="list-style-type: decimal">
<li>An environment with no class attribute.</li>
<li>An environment with a class <code>&quot;e2&quot;</code>, but without a <code>$.e2</code> S3 method.</li>
<li>An environment with a class <code>&quot;e3&quot;</code>, which has a <code>$.e3</code> S3 method that simply returns <code>NULL</code>.</li>
</ol>
<p>Each one of these environments will contain an object <code>x</code>.</p>
<pre class="r"><code>e1 &lt;- new.env(hash = FALSE, parent = emptyenv())
e2 &lt;- new.env(hash = FALSE, parent = emptyenv())
e3 &lt;- new.env(hash = FALSE, parent = emptyenv())

e1$x &lt;- 1
e2$x &lt;- 1
e3$x &lt;- 1

class(e2) &lt;- &quot;e2&quot;
class(e3) &lt;- &quot;e3&quot;

# Define an S3 method for class e3
`$.e3` &lt;- function(x, name) {
  NULL
}</code></pre>
<p>Now we can run timing tests for calling <code>$</code> on each type of object. Note that for the <code>e3</code> object, the <code>$</code> function does nothing  it simply returns <code>NULL</code>.</p>
<pre class="r"><code>speed &lt;- microbenchmark(
  e1$x,
  e2$x,
  e3$x
)
speed &lt;- mb_summary(speed)
speed
#&gt;   name median
#&gt; 1 e1$x 0.2950
#&gt; 2 e2$x 1.0680
#&gt; 3 e3$x 1.1065</code></pre>
<p>Using <code>$</code> on <code>e2</code> and <code>e3</code> is much slower than on <code>e1</code>. This is because <code>e2</code> and <code>e3</code> have a class attribute. Even though theres no <code>$</code> method defined for <code>e2</code>, doing <code>e2$x</code> still about 6 times slower than <code>e1$x</code>, simply because R looks for an appropriate S3 method.</p>
<p><code>e3$x</code> is slightly faster than <code>e2$x</code>; this is probably because the <code>$.e3</code> function doesnt actually do anything other than return NULL.</p>
<p>If an object has a class attribute, R will attempt to look for a method every time <code>$</code> is called. This can slow things down considerably, if <code>$</code> is used often.</p>
</div>
<div id="lists-vs.environments-and-vs." class="section level2">
<h2>Lists vs.environments, and <code>$</code> vs. <code>[[</code></h2>
<p>Lists could also be used for creating classes (albeit not with reference semantics). How much time does it take to access items using <code>$</code> for lists vs.environments? Well also compare using <code>obj$x</code> to <code>obj[['x']]</code>.</p>
<pre class="r"><code>lst &lt;- list(x = 10)
env &lt;- new.env()
env$x &lt;- 10

mb_summary(microbenchmark(
  lst = lst$x,
  env = env$x,
  lst[['x']],
  env[['x']]
))
#&gt;         name median
#&gt; 1        lst 0.2265
#&gt; 2        env 0.2250
#&gt; 3 lst[[&quot;x&quot;]] 0.2070
#&gt; 4 env[[&quot;x&quot;]] 0.1910</code></pre>
<p>Performance is comparable across environments and lists.</p>
<p>The <code>[[</code> operator is slightly faster than <code>$</code>, probably because it doesnt need to convert the unevaluated symbol to a string.</p>
<hr />
</div>
</div>
<div id="wrap-up" class="section level1">
<h1>Wrap-up</h1>
<p>R6 objects take less memory and are significantly faster than Rs reference class objects, and they also have some options that provide for even more speed.</p>
<p>In these tests, the biggest speedup for R6 classes comes from not using a class attribute; this speeds up the use of <code>$</code>. Non-portable R6 classes can also access fields without <code>$</code> at all, which provides another modest speed boost. In most cases, these speed increases are negligible  they are on the order of microseconds and will be noticeable only when tens or even hundreds of thousands of class member accesses are performed.</p>
<hr />
</div>
<div id="appendix" class="section level1">
<h1>Appendix</h1>
<div id="functions-for-calculating-object-sizes" class="section level2">
<h2>Functions for calculating object sizes</h2>
<pre class="r"><code># Utility functions for calculating sizes
obj_size &lt;- function(expr, .env = parent.frame()) {
  size_n &lt;- function(n = 1) {
    objs &lt;- lapply(1:n, function(x) eval(expr, .env))
    as.numeric(do.call(object_size, objs))
  }

  data.frame(one = size_n(1), incremental = size_n(2) - size_n(1))
}

obj_sizes &lt;- function(..., .env = parent.frame()) {
  exprs &lt;- as.list(match.call(expand.dots = FALSE)$...)
  names(exprs) &lt;- lapply(1:length(exprs),
    FUN = function(n) {
      name &lt;- names(exprs)[n]
      if (is.null(name) || name == &quot;&quot;) paste(deparse(exprs[[n]]), collapse = &quot; &quot;)
      else name
    })

  sizes &lt;- mapply(obj_size, exprs, MoreArgs = list(.env = .env), SIMPLIFY = FALSE)
  do.call(rbind, sizes)
}</code></pre>
</div>
<div id="system-information" class="section level2">
<h2>System information</h2>
<pre class="r"><code>sessionInfo()
#&gt; R version 3.3.1 (2016-06-21)
#&gt; Platform: x86_64-pc-linux-gnu (64-bit)
#&gt; Running under: Ubuntu 16.04.1 LTS
#&gt; 
#&gt; locale:
#&gt;  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
#&gt;  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=C              
#&gt;  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
#&gt;  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
#&gt;  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
#&gt; [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
#&gt; 
#&gt; attached base packages:
#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     
#&gt; 
#&gt; other attached packages:
#&gt; [1] scales_0.4.0           ggplot2_2.1.0.9000     microbenchmark_1.4-2.1
#&gt; [4] R6_2.2.0               pryr_0.1.2            
#&gt; 
#&gt; loaded via a namespace (and not attached):
#&gt;  [1] Rcpp_0.12.7        codetools_0.2-14   digest_0.6.10     
#&gt;  [4] assertthat_0.1     plyr_1.8.4         grid_3.3.1        
#&gt;  [7] gtable_0.2.0       formatR_1.4        magrittr_1.5      
#&gt; [10] evaluate_0.9       stringi_1.1.1      lazyeval_0.2.0    
#&gt; [13] rmarkdown_1.0.9014 labeling_0.3       tools_3.3.1       
#&gt; [16] stringr_1.1.0      munsell_0.4.3      yaml_2.1.13       
#&gt; [19] colorspace_1.2-6   htmltools_0.3.5    knitr_1.14        
#&gt; [22] tibble_1.2</code></pre>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
