<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Setup for using meetupr • meetupr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Setup for using meetupr">
<meta property="og:description" content="meetupr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">meetupr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.99.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/meetupr_vignette.html">R-Ladies chapters on meetup.com</a>
    </li>
    <li>
      <a href="../articles/setup.html">Set up non-interactive use</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="setup_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Setup for using meetupr</h1>
            
      
      
      <div class="hidden name"><code>setup.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">meetupr</span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="api-key-no">API key? No<a class="anchor" aria-label="anchor" href="#api-key-no"></a>
</h2>
<p>As of August 15, 2019, Meetup.com switched from an API key based authentication system to OAuth 2.0, so we added support for OAuth.</p>
</div>
<div class="section level2">
<h2 id="oauth-yes">OAuth? Yes<a class="anchor" aria-label="anchor" href="#oauth-yes"></a>
</h2>
<p>Meetup API and this package recommend using OAuth for authentication. We’ve abstracted part of the difficulty but it’s still a bit more complex than storing a simple API key as secret.</p>
<p>With OAuth you need</p>
<ul>
<li><p>an OAuth app. There’s one shipped in with the package! If you prefer you can bring your own app by setting the <code>meetupr.consumer_key</code> and <code>meetupr.consumer_secret</code> options.</p></li>
<li><p>an access token. It’s an httr object and it can be saved to disk. It expires but can be refreshed. It contains secrets so it’s a sensitive file! For creating one you will be prompted to log into your meetup.com account in the browser. But then if you cache the token to disk, you won’t need to do that again. This means you can create a token on your computer locally and use it on a server (if the server is public, encrypting the token).</p></li>
</ul>
<p>Let’s go through workflows and ways to control how your token is created and cached.</p>
<p>If you don’t tweak anything, the first time you run a meetupr function, you’ll be prompted to go into your browser and a token will be created. It will be saved to disk in an app directory as determined by <code>rappdirs::user_data_dir("meetupr", "meetupr")</code></p>
<p>And all the times you use meetupr again, this token will be used, and refreshed and re-saved as needed.</p>
<p>This is, we hope, a sensible default.</p>
<p>Now if you want to have a different behavior you either tweak options (in your .Rprofile so for all sessions in the future, or just in the current session), or call the <code><a href="../reference/meetup-auth.html">meetup_auth()</a></code> function directly.</p>
<ul>
<li>Don’t want to cache the token to disk? Use the <code>cache</code> argument, to be set to <code>FALSE</code>.</li>
<li>Don’t want to use an app dir? Use the <code>use_appdir</code> argument, to be set to <code>FALSE</code>. If it is false, the token will be cached to <code>.httr-oauth</code> (unless <code>cache</code> is FALSE too, of course)</li>
<li>Want to save the token to somewhere you choose? No way to use an option. Use the <code>token_path</code> argument of <code><a href="../reference/meetup-auth.html">meetup_auth()</a></code>.</li>
<li>Want to use a token that was created elsewhere? Save it to disk, keep it secret, and refer to it via the <code>token</code> argument of <code><a href="../reference/meetup-auth.html">meetup_auth()</a></code> that can be either a token or the path to a token.</li>
</ul>
</div>
<div class="section level2">
<h2 id="what-about-running-my-code-on-a-server">What about running my code on a server<a class="anchor" aria-label="anchor" href="#what-about-running-my-code-on-a-server"></a>
</h2>
<p>Please read <a href="https://httr.r-lib.org/articles/secrets.html" class="external-link">httr vignette about secrets</a> and <a href="https://gargle.r-lib.org/articles/articles/managing-tokens-securely.html" class="external-link">gargle vignette about managing tokens securely</a>.</p>
<p>Here is how we handle our secret token for testing the package, it might inspire you.</p>
<div class="section level3">
<h3 id="create-and-encrypt-the-token">Create and encrypt the token<a class="anchor" aria-label="anchor" href="#create-and-encrypt-the-token"></a>
</h3>
<p>First we create a token. We build and git ignore it, even safer would be to put it elsewhere on the computer, maybe a temporary file!</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">token_path</span> <span class="op">&lt;-</span> <span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/test_path.html" class="external-link">test_path</a></span><span class="op">(</span><span class="st">".meetup_token.rds"</span><span class="op">)</span>
<span class="fu">use_build_ignore</span><span class="op">(</span><span class="va">token_path</span><span class="op">)</span>
<span class="fu">use_git_ignore</span><span class="op">(</span><span class="va">token_path</span><span class="op">)</span>

<span class="fu">meetupr</span><span class="fu">::</span><span class="fu"><a href="../reference/meetup-auth.html">meetup_auth</a></span><span class="op">(</span>
  token <span class="op">=</span> <span class="cn">NULL</span>,
  cache <span class="op">=</span> <span class="cn">TRUE</span>,
  use_appdir <span class="op">=</span> <span class="cn">FALSE</span>,
  token_path <span class="op">=</span> <span class="va">token_path</span>
<span class="op">)</span></code></pre></div>
<p>We create a key and save it as an environment variable. We used an internal function for saving it, you could copy-paste it to .Renviron by hand (see also <code>usethis::edit_r_environ()</code>).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># sodium_key &lt;- sodium::keygen()</span>
<span class="co"># save an environment variable "MEETUPR_PWD" = sodium::bin2hex(sodium_key)</span></code></pre></div>
<p>Using the key we encrypt the file. secret.rds will be committed to our repo!</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu">cyphr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/cyphr/reference/key_sodium.html" class="external-link">key_sodium</a></span><span class="op">(</span><span class="fu">sodium</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sodium/man/helpers.html" class="external-link">hex2bin</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MEETUPR_PWD"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu">cyphr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/cyphr/reference/encrypt_data.html" class="external-link">encrypt_file</a></span><span class="op">(</span>
  <span class="va">token_path</span>,
  key <span class="op">=</span> <span class="va">key</span>,
  dest <span class="op">=</span> <span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/test_path.html" class="external-link">test_path</a></span><span class="op">(</span><span class="st">"secret.rds"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="use-the-token-on-ci">Use the token on CI<a class="anchor" aria-label="anchor" href="#use-the-token-on-ci"></a>
</h3>
<ul>
<li><p>Save the <code>MEETUPR_PWD</code> environment variable as secret on CI (actually called repo secret for e.g. GitHub Actions)</p></li>
<li><p>Use the code below to decrypt the secret before using meetupr. We save the temporary token to disk but to a temporary folder so it won’t end up in a package check artefact.</p></li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu">cyphr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/cyphr/reference/key_sodium.html" class="external-link">key_sodium</a></span><span class="op">(</span><span class="fu">sodium</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sodium/man/helpers.html" class="external-link">hex2bin</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MEETUPR_PWD"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="va">temptoken</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".rds"</span><span class="op">)</span>

<span class="fu">cyphr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/cyphr/reference/encrypt_data.html" class="external-link">decrypt_file</a></span><span class="op">(</span>
  <span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/test_path.html" class="external-link">test_path</a></span><span class="op">(</span><span class="st">"secret.rds"</span><span class="op">)</span>,
  key <span class="op">=</span> <span class="va">key</span>,
  dest <span class="op">=</span> <span class="va">temptoken</span>
<span class="op">)</span>

<span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">temptoken</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>

<span class="va">token</span> <span class="op">&lt;-</span> <span class="fu">meetupr</span><span class="fu">::</span><span class="fu"><a href="../reference/meetup-auth.html">meetup_auth</a></span><span class="op">(</span>
  token <span class="op">=</span> <span class="va">token</span>,
  use_appdir <span class="op">=</span> <span class="cn">FALSE</span>,
  cache <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>MEETUPR_PAT <span class="op">=</span> <span class="va">temptoken</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Erin LeDell, Olga Mierzwa-Sulima, Lucy D’Agostino McGowan, Claudia Vitolo.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
